<!DOCTYPE html>
<html lang="en">
  <head><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">

<meta name="description" content="Stedfast as thou art."/><link rel="alternate" href="/atom.xml" title="Calios' Eden"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.11.0" />
<link rel="canonical" href="http://www.caliosd.gq/page/6/"/>

<link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />
<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.11.0" />

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-71292392-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-71292392-1');
</script><script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>
<script>
  window.config = {"leancloud":{"app_id":null,"app_key":null},"toc":true,"fancybox":true,"pjax":"","latex":false};
</script>

    <title>Calios' Eden</title>
  <link rel="alternate" href="/atom.xml" title="Calios' Eden" type="application/atom+xml">
</head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">Calios' Eden</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list"><a href="/">
        <li class="mobile-menu-item">Home
          </li>
      </a><a href="/archives/">
        <li class="mobile-menu-item">Archives
          </li>
      </a><a href="/tags/">
        <li class="mobile-menu-item">Tags
          </li>
      </a><a href="/about/">
        <li class="mobile-menu-item">About
          </li>
      </a></ul>
</nav>
<div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">Calios' Eden</a>
</div>

<nav class="site-navbar"><ul id="menu" class="menu"><li class="menu-item">
          <a class="menu-item-link" href="/">
            Home
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/archives/">
            Archives
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/tags/">
            Tags
            </a>
        </li>
      <li class="menu-item">
          <a class="menu-item-link" href="/about/">
            About
            </a>
        </li>
      </ul></nav>
</header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content"><section id="posts" class="posts"><article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2016/03/07/stop-CALayer-shadow-from-affecting-subviews/">Stop CALayer shadow from affecting subviews</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-03-07
        </span></div>
    </header>

    <div class="post-content"><p>When your parentView is by any chance transparent, the CALayer shadow set for parentView would affect subviews, just as image below.</p>
<p><img src="http://i.stack.imgur.com/CZPUY.png" alt=""></p>
<p>While after setting background color to white color, it shows as we expected.</p>
<p><img src="http://i.stack.imgur.com/YFrqh.png" alt=""></p>
<p><a href="https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreAnimation_guide/LayerStyleProperties/LayerStyleProperties.html#//apple_ref/doc/uid/TP40004514-CH10-SW18" target="_blank" rel="external">Docs</a> from Apple: </p>
<blockquote>
<p>Figure A-7 shows several different versions of the same sample layer with a red shadow applied. The left and middle versions include a background color so the shadow appears only around the border of the layer. However, the version on the right does not include a background color. In this case, the shadow is applied to the layerâ€™s content, border, and sublayers.</p>
</blockquote>
<p><img src="http://i.stack.imgur.com/2TGcA.png" alt=""></p>
<hr>
<p><strong> Ref:</strong></p>
<ul>
<li><a href="http://stackoverflow.com/questions/31312087/objectivec-set-shadow-to-parent-view/31313216#31313216" target="_blank" rel="external">http://stackoverflow.com/questions/31312087/objectivec-set-shadow-to-parent-view/31313216#31313216</a></li>
</ul>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2016/03/03/value-of-optional-type-â€˜Stringâ€™-not-unwrapped-error-in-Swift/">Value of optional type â€˜Stringâ€™ not unwrapped error in Swift</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-03-03
        </span></div>
    </header>

    <div class="post-content"><p>æ–°å¼€äº†<code>K08-RandomColorization</code>ï¼Œåˆšå†™äº†ä¸€è¡Œä»£ç ï¼š</p>
<pre><code>let bgMusic = NSURL(fileURLWithPath: NSBundle.mainBundle().pathForResource(&quot;Ecstasy&quot;, ofType: &quot;mp3&quot;))
</code></pre><p>ç„¶åå°±æŠ¥äº†ä¸€ä¸ªerrorï¼š<br><em>Value of optional type â€˜Stringâ€™ not unwrapped;did you mean to use â€˜!â€™ or â€˜?â€™?â€</em></p>
<p><a href="http://stackoverflow.com/a/25663421/1594792" target="_blank" rel="external">è¿™é‡Œ</a>å¯»å¾—ä¸€ä¸ªä¸é”™çš„ç­”æ¡ˆï¼Œç¿»è¯‘åŠç†è§£å¦‚ä¸‹ï¼š</p>
<p>é¦–å…ˆï¼Œè¿™è¡Œä»£ç ä½¿ç”¨åˆ°äº†<strong> å¯é€‰é“¾å¼è°ƒç”¨ï¼ˆOptional Chainingï¼‰</strong> è¿™ä¸ªå®¶ä¼™ã€‚ç”¨äººè¯è¯´ï¼Œå°±æ˜¯<code>NSBundle.mainBundle().pathForResource(&quot;Ecstasy&quot;, ofType: &quot;mp3&quot;)</code> è¦ä¹ˆå°±æ˜¯ä¸€ä¸ª<code>String</code>ï¼Œè¦ä¹ˆå°±æ˜¯ä¸€ä¸ª<code>nil</code>ã€‚</p>
<p>ä½†æ˜¯ï¼Œæ˜¾ç„¶<code>NSURL</code>çš„<code>fileURLWithPath:</code>æ–¹æ³•ä¸ä¼šæ¥å—<code>nil</code>ï¼Œåªä¼šæ¥å—<code>String</code>ç±»å‹çš„å‚æ•°ï¼Œæ‰€ä»¥ç¼–è¯‘å™¨å°±æŠŠè¿™ä¸ªerroræŠ¥å‡ºæ¥äº†ã€‚ï¼ˆå¯ä»¥åšä¸€ä¸ªå®éªŒï¼Œç›´æ¥å†™<code>let bgMusic = NSURL(fileURLWithPath: nil)</code>ï¼Œå°±ä¼šå‘ç°æŠ¥<code>Nil is not compatible with expected argument type â€˜Stringâ€™</code>çš„errorã€‚ï¼‰</p>
<p>è§£å†³åŠæ³•æ˜¯å¼ºåˆ¶å±•å¼€<code>NSBundle.mainBundle().pathForResource(&quot;Ecstasy&quot;, ofType: &quot;mp3&quot;)</code>ï¼Œå³æ·»åŠ ä¸€ä¸ª<code>!</code>ï¼š<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">let bgMusic = NSURL(<span class="name">fileURLWithPath</span>: NSBundle.mainBundle().pathForResource(<span class="string">"Ecstasy"</span>, ofType: <span class="string">"mp3"</span>)!)</div></pre></td></tr></table></figure></p>
<p>ä½†æ˜¯ï¼Œå¦‚æœæ‰€éœ€æ–‡ä»¶ä¸å­˜åœ¨å°±ä¼šå¯¼è‡´ä¸€ä¸ªè¿è¡Œæ—¶çš„errorï¼Œç›´æ¥æŒ‚æ‰ã€‚æ‰€ä»¥ï¼Œé€šå¸¸æ¥è¯´æœ€å¥½æ˜¯ç”¨ä¸€ä¸ªå¯é€‰ç»‘å®šæŠŠå®ƒåŒ…èµ·æ¥ï¼š<br><figure class="highlight nix"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> <span class="keyword">let</span> <span class="attr">file</span> = NSBundle.mainBundle().pathForResource(<span class="string">"aaa"</span>, ofType: <span class="string">"mp3"</span>) &#123;</div><div class="line">    <span class="keyword">let</span> <span class="attr">bgMusic</span> = NSURL(fileURLWithPath: file)</div><div class="line">    NSLog(bgMusic.absoluteString)</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>è¿™æ ·å°±å¯ä»¥ä¿è¯<code>fileURLWithPath:</code>åªæœ‰åœ¨æ–‡ä»¶ä¸ä¸ºç©ºæ—¶æ‰è¢«è°ƒç”¨äº†ã€‚å®Œç¾ï½</p>
<hr>
<p><strong> Ref: </strong></p>
<ul>
<li><a href="http://stackoverflow.com/a/25663421/1594792" target="_blank" rel="external">http://stackoverflow.com/a/25663421/1594792</a></li>
</ul>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2016/03/03/how-to-generate-a-random-number-in-Objective-C/">How to generate a random number in Objective-C ?</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-03-03
        </span></div>
    </header>

    <div class="post-content"><p>Brief instruction from <a href="http://nshipster.com/random/" target="_blank" rel="external">Mattt in NSHipster</a> as below.</p>
<h5 id="1-Random-int-between-0-and-N-1"><a href="#1-Random-int-between-0-and-N-1" class="headerlink" title="1.Random int between 0 and N-1"></a>1.Random int between 0 and N-1</h5><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">NSUInteger r</span> = arc4random_uniform(N);</div></pre></td></tr></table></figure>
<h5 id="2-Random-int-between-1-and-N"><a href="#2-Random-int-between-1-and-N" class="headerlink" title="2.Random int between 1 and N"></a>2.Random int between 1 and N</h5><figure class="highlight ebnf"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="attribute">NSUInteger r</span> = arc4random_uniform(N) + 1;</div></pre></td></tr></table></figure>
<h5 id="3-Random-double-between-0-and-1"><a href="#3-Random-double-between-0-and-1" class="headerlink" title="3.Random double between 0 and 1"></a>3.Random double between 0 and 1</h5><figure class="highlight gcode"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sra<span class="symbol">nd48</span><span class="comment">(time(0)</span>);</div><div class="line">double r = dra<span class="symbol">nd48</span><span class="comment">()</span>;</div></pre></td></tr></table></figure>
<p>Accordingly, in Swift, itâ€™s like this.<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">let redValue = CGFloat(<span class="name">drand48</span>())</div><div class="line">let blueValue = CGFloat(<span class="name">drand48</span>())</div><div class="line">let greenValue = CGFloat(<span class="name">drand48</span>())</div></pre></td></tr></table></figure></p>
<hr>
<p><strong> Ref: </strong></p>
<ul>
<li><a href="http://nshipster.com/random/" target="_blank" rel="external">http://nshipster.com/random/</a></li>
</ul>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2016/03/02/crash-related-to-UIVisualEffectView/">Crash related to `UIVisualEffectView`</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-03-02
        </span></div>
    </header>

    <div class="post-content"><p>å°è¯•åœ¨storyboardä¸­æ·»åŠ äº†ä¸€ä¸ª<code>UIVisualEffectView</code>ï¼Œç„¶ååˆæ·»åŠ äº†å‡ ä¸ªå­è§†å›¾ï¼Œç„¶åï¼Œå°±å’»çš„ä¸€ä¸‹ï¼ŒæŒ‚äº†ã€‚<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">2016</span><span class="number">-03</span><span class="number">-02</span> <span class="number">14</span>:<span class="number">57</span>:<span class="number">45.953</span> K06-Where[<span class="number">3499</span>:<span class="number">225450</span>] The view hierarchy <span class="keyword">is</span> <span class="keyword">not</span> prepared <span class="keyword">for</span> <span class="keyword">the</span> constraint: &lt;NSLayoutConstraint:<span class="number">0x7f843501d7f0</span> UIView:<span class="number">0x7f843501da50</span>.centerX == UIVisualEffectView:<span class="number">0x7f843501d150</span>.centerX&gt;</div><div class="line">    When added <span class="keyword">to</span> a view, <span class="keyword">the</span> constraint's items must be descendants <span class="keyword">of</span> <span class="keyword">that</span> view (<span class="keyword">or</span> <span class="keyword">the</span> view itself). This will crash <span class="keyword">if</span> <span class="keyword">the</span> constraint needs <span class="keyword">to</span> be resolved <span class="keyword">before</span> <span class="keyword">the</span> view hierarchy <span class="keyword">is</span> assembled. Break <span class="keyword">on</span> -[UIView(UIConstraintBasedLayout) _viewHierarchyUnpreparedForConstraint:] <span class="keyword">to</span> debug.</div><div class="line"><span class="number">2016</span><span class="number">-03</span><span class="number">-02</span> <span class="number">14</span>:<span class="number">57</span>:<span class="number">45.954</span> K06-Where[<span class="number">3499</span>:<span class="number">225450</span>] The view hierarchy <span class="keyword">is</span> <span class="keyword">not</span> prepared <span class="keyword">for</span> <span class="keyword">the</span> constraint: &lt;NSLayoutConstraint:<span class="number">0x7f843501e250</span> UIView:<span class="number">0x7f843501da50</span>.top == UIVisualEffectView:<span class="number">0x7f843501d150</span>.top + <span class="number">66</span>&gt;</div></pre></td></tr></table></figure></p>
<p><code>command + shift + 0</code>æŸ¥ä¸€ä¸‹è‹¹æœçš„æ–‡æ¡£ï¼š</p>
<blockquote>
<p>After you add the visual effect view to the view hierarchy, add any subviews to the contentView property of the visual effect view. Do not add subviews directly to the visual effect view itself. (From <a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIVisualEffectView/index.html#//apple_ref/occ/cl/UIVisualEffectView" title="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIVisualEffectView/index.html#//apple_ref/occ/cl/UIVisualEffectView" target="_blank" rel="external">ğŸ</a>)</p>
</blockquote>
<p>å¦‚åŒ<code>UITableViewCell</code>ä¸€æ ·ï¼Œ<code>UIVisualEffectView</code>æœ‰è‡ªå·±çš„<code>contentView</code>ã€‚æ‰€ä»¥ï¼Œä¸ç®¡æ˜¯æ·»åŠ å­è§†å›¾ï¼Œè¿˜æ˜¯æ·»åŠ å­è§†å›¾ç›¸å…³çš„çº¦æŸï¼Œéƒ½åº”è¯¥åŠ åœ¨è¿™ä¸ª<code>contentView</code>ä¸Šï¼Œè€Œä¸æ˜¯ç›´æ¥åŠ åˆ°<code>UIVisualEffectView</code>ä¸Šã€‚ä¸Šé¢çš„crashå°±æ˜¯ç”±äºå­è§†å›¾æ·»åŠ çš„çº¦æŸä¸ç¬¦åˆè§†å›¾æ ‘çš„è§„åˆ™å¯¼è‡´çš„ã€‚</p>
<p>çŸ¥é“äº†è¿™äº›ï¼ŒæŠŠåŸæœ¬æ·»åŠ åœ¨<code>UIVisualEffectView</code>çš„çº¦æŸåˆ æ‰ï¼Œæ”¹ä¸ºæ·»åŠ åˆ°å®ƒçš„<code>contentView</code>ä¸Šã€‚Overï½</p>
<hr>
<p><strong> Ref: </strong></p>
<ul>
<li><a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIVisualEffectView/index.html#//apple_ref/occ/cl/UIVisualEffectView" target="_blank" rel="external">https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIVisualEffectView/index.html#//apple_ref/occ/cl/UIVisualEffectView</a></li>
</ul>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2016/03/02/corelocation-authorization-in-iOS8/">CoreLocation Authorization in iOS8+</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-03-02
        </span></div>
    </header>

    <div class="post-content"><h5 id="1-CoreLocationManagerä¸­æ–°å¢çš„æ–¹æ³•"><a href="#1-CoreLocationManagerä¸­æ–°å¢çš„æ–¹æ³•" class="headerlink" title="1.CoreLocationManagerä¸­æ–°å¢çš„æ–¹æ³•"></a>1.<code>CoreLocationManager</code>ä¸­æ–°å¢çš„æ–¹æ³•</h5><p>iOS8åœ¨ä½ç½®è·å–æƒé™ä¸Šåšäº†æ›´ç»†çš„åˆ’åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©å…è®¸appåœ¨åå°ä½¿ç”¨ä½ç½®ä¿¡æ¯ã€åœ¨ä½¿ç”¨æœŸé—´ä½¿ç”¨ä½ç½®ä¿¡æ¯æˆ–è€…ä¸å…è®¸ä½¿ç”¨ä½ç½®ä¿¡æ¯ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨<code>CLLocationManager</code>ä¸­æ·»åŠ äº†å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><code>requestWhenInUseAuthorization()</code>: å‘ç”¨æˆ·è¯·æ±‚åªåœ¨appä½¿ç”¨æœŸé—´è·å–ä½ç½®ä¿¡æ¯çš„æƒé™ã€‚</li>
<li><code>requestAlwaysAuthorization()</code>: å‘ç”¨æˆ·è¯·æ±‚appåœ¨åå°ä½¿ç”¨ä½ç½®ä¿¡æ¯çš„æƒé™ã€‚</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">locationManager = CLLocationManager()</div><div class="line">locationManager<span class="selector-class">.delegate</span> = self</div><div class="line">locationManager<span class="selector-class">.desiredAccuracy</span> = kCLLocationAccuracyBest</div><div class="line">locationManager.requestAlwaysAuthorization()</div><div class="line">locationManager.startUpdatingLocation()</div></pre></td></tr></table></figure>
<h5 id="2-æä¾›è¯´æ˜ä¿¡æ¯"><a href="#2-æä¾›è¯´æ˜ä¿¡æ¯" class="headerlink" title="2.æä¾›è¯´æ˜ä¿¡æ¯"></a>2.æä¾›è¯´æ˜ä¿¡æ¯</h5><p><code>CoreLocation</code>éœ€è¦ç»™ç”¨æˆ·å±•ç¤ºä¸€ä¸ªä¿¡æ¯ï¼Œå‘Šè¯‰ä»–ä»¬ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨ä»–ä»¬çš„ä½ç½®ä¿¡æ¯ã€‚è¿™ä¸ªå±•ç¤ºçš„ä¿¡æ¯ï¼Œå«â€œusage stringâ€ï¼Œå¯ä»¥åœ¨info.plistæ–‡ä»¶ä¸­è®¾ç½®ã€‚</p>
<p>ç„¶è€Œï¼Œä¸‹æ‹‰åˆ—è¡¨ä¸­æ‰¾åˆ°çš„å”¯ä¸€ç›¸å…³çš„<code>NSLocationUsageDescription</code>è²Œä¼¼ä¸èµ·ä»€ä¹ˆä½œç”¨ã€‚</p>
<p><img src="http://7xkwcv.com1.z0.glb.clouddn.com/16-3-22/41359249.jpg" alt=""></p>
<p>å› ä¸º<code>NSLocationUsageDescription</code>åœ¨iOS8åŠiOS8+ä¸­éƒ½è¢«å¿½ç•¥æ‰äº†ã€‚åŒæ—¶ï¼Œæœ‰ä¸¤ä¸ªæ–°çš„keyè¢«å¼•å…¥è¿›æ¥ã€‚</p>
<ul>
<li><code>NSLocationAlwaysUsageDescription</code>:å‰åå°å‡å…è®¸ä½¿ç”¨</li>
<li><code>NSLocationWhenInUseUsageDescription</code>: åªå…è®¸å‰å°ä½¿ç”¨</li>
</ul>
<p>è²Œä¼¼Xcodeå¹¶æ²¡æœ‰æ›´æ–°ä¸‹æ‹‰åˆ—è¡¨ä¸­çš„å†…å®¹ï¼Œæ‰€ä»¥åªèƒ½æ‰‹åŠ¨è¾“å…¥keyäº†ã€‚</p>
<p><img src="http://7xkwcv.com1.z0.glb.clouddn.com/16-3-22/65397100.jpg" alt=""></p>
<p>åœ¨iPhoneä¸­ç›¸åº”çš„è®¾ç½®ä¿¡æ¯å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ï¼š</p>
<p><img src="http://7xkwcv.com1.z0.glb.clouddn.com/16-3-22/37636479.jpg" alt=""></p>
<p><img src="http://7xkwcv.com1.z0.glb.clouddn.com/16-3-22/21834545.jpg" alt=""></p>
<p>å“¦äº†ï¼ŒK06-Whereç»“æŸäº†ã€‚å›å½’åœ°çƒã€‚</p>
<hr>
<p><strong>Ref:</strong></p>
<p>éƒ¨åˆ†å†…å®¹ç¿»è¯‘è‡ªï¼š<br><a href="https://www.shinobicontrols.com/blog/ios8-day-by-day-day-34-corelocation-authorization" target="_blank" rel="external">https://www.shinobicontrols.com/blog/ios8-day-by-day-day-34-corelocation-authorization</a></p>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2016/02/29/tips-for-AppleScript/">å…³äºAppleScriptçš„ç‚¹æ»´</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-02-29
        </span></div>
    </header>

    <div class="post-content"><p>1.AppleScriptç»ˆæå…¥é—¨æ‰‹å†Œï¼š</p>
<ul>
<li>ä¸­æ–‡ç‰ˆï¼š<a href="http://blog.csdn.net/yang3wei/article/details/7964226" target="_blank" rel="external">http://blog.csdn.net/yang3wei/article/details/7964226</a></li>
<li>è‹±æ–‡ç‰ˆï¼š<a href="http://computers.tutsplus.com/tutorials/the-ultimate-beginners-guide-to-applescript--mac-3436" target="_blank" rel="external">http://computers.tutsplus.com/tutorials/the-ultimate-beginners-guide-to-applescriptâ€“mac-3436</a></li>
</ul>
<p>2.ä¿å­˜åˆ°æœ¬åœ°çš„.scptæ–‡ä»¶å¦‚ä½•åœ¨terminalä¸­è¿è¡Œï¼Ÿ<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> osascript myScript.scpt</span></div></pre></td></tr></table></figure></p>
<p>3.æ›´å¤šèµ„æ–™è§ğŸå®˜ç½‘ï¼š</p>
<ul>
<li><a href="https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/introduction/ASLR_intro.html" target="_blank" rel="external">https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/introduction/ASLR_intro.html</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptX/AppleScriptX.html" target="_blank" rel="external">https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptX/AppleScriptX.html</a></li>
</ul>
<p>4.å»¶ä¼¸æ€è€ƒï¼š</p>
<ul>
<li>IFTTTçš„å®ç°åŸç†ï¼Ÿ</li>
<li>OS Xçš„app Automatorå¦‚ä½•ä½¿ç”¨ï¼Ÿæ˜¯å¦æä¾›äº†æ›´å¥½çš„æ–¹å¼æ¥æé«˜ç”Ÿäº§æ•ˆç‡ï¼Ÿ</li>
<li>å›åˆ°æŠ˜è…¾AppleScriptçš„åŸå§‹é—®é¢˜ï¼šåœ¨å†™markdownè¿‡ç¨‹ä¸­ï¼Œå°†å‰ªåˆ‡æ¿çš„å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ åˆ°ä¸ƒç‰›ï¼Œå¹¶ç”ŸæˆURLè¿”å›åˆ°å‰ªåˆ‡ç‰ˆï¼Œæ–¹ä¾¿åœ¨markdownä¸­æ’å…¥å›¾ç‰‡ã€‚è¿™ä¸ªå°åŠŸèƒ½ï¼Œè¯¥å¦‚ä½•å®ç°ï¼Ÿï¼ˆå»ºè®®ä½†ä¸å±€é™äºpythonå’ŒAppleScriptã€‚ï¼‰</li>
</ul>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2016/02/29/toll-free bridging/">Toll-free bridging</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-02-29
        </span></div>
    </header>

    <div class="post-content"><blockquote>
<p>æ‰€è°“çš„Toll-free bridgingæ˜¯è¯´å¯ä»¥åœ¨æŸä¸ªæ¡†æ¶çš„æ–¹æ³•æˆ–å‡½æ•°åŒæ—¶ä½¿ç”¨Core Foundatioå’ŒFoundation æ¡†æ¶ä¸­çš„æŸäº›ç±»å‹ã€‚å¾ˆå¤šæ•°æ®ç±»å‹æ”¯æŒè¿™ä¸€ç‰¹æ€§ï¼Œå…¶ä¸­åŒ…æ‹¬ç¾¤ä½“å’Œå­—ç¬¦ä¸²æ•°æ®ç±»å‹ã€‚æ¯ä¸ªæ¡†æ¶çš„ç±»å’Œç±»å‹æè¿°éƒ½ä¼šå¯¹æŸä¸ªå¯¹è±¡æ˜¯å¦ä¸º toll-Free bridgedï¼Œåº”å’Œä»€ä¹ˆå¯¹è±¡æ¡¥æ¥è¿›è¡Œè¯´æ˜ã€‚<br>ç±»å‹è½¬æ¢å…³é”®å­—åŒºåˆ«ï¼š</p>
<ul>
<li>__bridge ï¼ˆç›¸å½“äºassignï¼Œè¿˜æ˜¯è¦è‡ªå·±ç®¡ç†å¯¹è±¡ï¼‰</li>
<li>__bridge_transferï¼ˆç›¸å½“äºcopyåreleaseï¼Œè½¬è®©äº†è‡ªå·±å¯¹å¯¹è±¡çš„æ‰€æœ‰æƒäº¤ç»™åˆ«äººå»ç®¡ç†ï¼‰</li>
<li>__bridge_retainedï¼ˆç›¸å½“äºretainï¼Œå¢åŠ é¢å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼‰  </li>
</ul>
<p>åŒæ—¶ä¹Ÿè¦æ³¨æ„åœ¨æ²¡æœ‰ARCå’Œxcode4.2ååŠ å…¥ARCçš„ä½¿ç”¨æ—¶çš„åŒºåˆ«</p>
</blockquote>
<p>æ›´å¤šå†…å®¹è§Lancyçš„<a href="http://gracelancy.com/blog/2014/04/21/toll-free-bridging/" title="http://gracelancy.com/blog/2014/04/21/toll-free-bridging/" target="_blank" rel="external">è¿™ç¯‡è®²è§£</a>å’Œè‹¹æœçš„æ–‡æ¡£<a href="https://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaEncyclopedia/Toll-FreeBridgin/Toll-FreeBridgin.html" title="https://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaEncyclopedia/Toll-FreeBridgin/Toll-FreeBridgin.html" target="_blank" rel="external">Toll-Free Bridging</a>ã€‚</p>
<hr>
<p><strong>Ref:</strong></p>
<ul>
<li><a href="http://blog.ibireme.com/2015/05/18/runloop/" target="_blank" rel="external">http://blog.ibireme.com/2015/05/18/runloop/</a></li>
<li><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html" target="_blank" rel="external">https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html</a></li>
<li><a href="http://chun.tips/blog/2014/10/20/zou-jin-run-loopde-shi-jie-[?]-:shi-yao-shi-run-loop?/" target="_blank" rel="external">http://chun.tips/blog/2014/10/20/zou-jin-run-loopde-shi-jie-%5B%3F%5D-:shi-yao-shi-run-loop%3F/</a></li>
<li>Toll-free bridgedï¼š<a href="http://gracelancy.com/blog/2014/04/21/toll-free-bridging/" target="_blank" rel="external">http://gracelancy.com/blog/2014/04/21/toll-free-bridging/</a></li>
<li>è°ƒç”¨æ ˆï¼š<a href="http://blog.chinaunix.net/uid-20760757-id-1872359.html" target="_blank" rel="external">http://blog.chinaunix.net/uid-20760757-id-1872359.html</a></li>
<li>RunLoopæºä»£ç ï¼š<a href="http://opensource.apple.com/source/CF/CF-855.17/CFRunLoop.c" target="_blank" rel="external">http://opensource.apple.com/source/CF/CF-855.17/CFRunLoop.c</a></li>
<li><a href="http://blog.cnbluebox.com/blog/2014/07/01/cocoashen-ru-xue-xi-nsoperationqueuehe-nsoperationyuan-li-he-shi-yong/" target="_blank" rel="external">http://blog.cnbluebox.com/blog/2014/07/01/cocoashen-ru-xue-xi-nsoperationqueuehe-nsoperationyuan-li-he-shi-yong/</a></li>
</ul>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2016/02/29/points-in-CoreAnimation/">CoreAnimationçš„å‡ ä¸ªçŸ¥è¯†ç‚¹</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-02-29
        </span></div>
    </header>

    <div class="post-content"><ul>
<li><strong>çŸ¢é‡å›¾ vs ä½å›¾ï¼ˆæ …æ ¼å›¾ï¼‰</strong></li>
</ul>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/a/ac/VectorGraphicsExample.jpg" alt="ï¼ˆaï¼‰åŸå§‹çŸ¢é‡å›¾ï¼›ï¼ˆbï¼‰çŸ¢é‡å›¾æ”¾å¤§8å€ï¼›ï¼ˆcï¼‰ä½å›¾æ”¾å¤§8å€ã€‚ä½å›¾çš„æ”¾å¤§è´¨é‡è¾ƒå·®ï¼Œä½†æ˜¯çŸ¢é‡å›¾å¯ä»¥ä¸é™ä½è´¨é‡åœ°æ— é™æ”¾å¤§ã€‚" title="çŸ¢é‡å›¾å’Œä½å›¾æ˜¾ç¤ºæ•ˆæœå¯¹æ¯”"></p>
<p><strong>çŸ¢é‡å›¾ï¼ˆvectorï¼‰</strong>ï¼Œä¹Ÿå«å‘é‡å›¾ï¼Œæ˜¯é€šè¿‡å¤šä¸ªå¯¹è±¡ç»„åˆç”Ÿæˆçš„ï¼Œå¯¹äºå…¶ä¸­æ¯ä¸€ä¸ªå¯¹è±¡çš„è®°å½•æ–¹å¼éƒ½æ˜¯ä»¥æ•°å­¦å‡½æ•°æ¥å®ç°çš„ï¼Œç¼©æ”¾ä¸å¤±çœŸã€‚å¸¸ç”¨çš„çŸ¢é‡ç»˜åˆ¶è½¯ä»¶æœ‰Adobe Illustratorã€Freehandã€Flashç­‰ã€‚<br><strong>ä½å›¾ï¼ˆbitmapï¼‰</strong>ï¼Œä¹Ÿå«æ …æ ¼å›¾ã€åƒç´ å›¾ï¼Œå³æœ€å°å•ä½ç”±åƒç´ æ„æˆçš„å›¾ï¼Œå¯æ“ä½œå¯¹è±¡æ˜¯åƒç´ ï¼Œå¯ä»¥æ”¹å˜å›¾åƒçš„é¥±å’Œåº¦ã€æ˜åº¦å’Œè‰²ç›¸ï¼Œç¼©æ”¾ä¼šå¤±çœŸã€‚å¸¸ç”¨çš„ä½å›¾ç»˜åˆ¶è½¯ä»¶æœ‰Adobe Photoshopç­‰ã€‚</p>
<ul>
<li>å¯¹äº<code>position</code>å’Œ<code>anchorPoint</code>å…³ç³»çš„ç†è§£<blockquote>
<p>Point-based coordinates are used when specifying values that map directly to screen coordinates or must be specified relative to another layer, such as for the layerâ€™s position property. Unit coordinates are used when the value should not be tied to screen coordinates because it is relative to some other value. For example, the layerâ€™s anchorPoint property specifies a point relative to the bounds of the layer itself, which can change. (<a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW15" target="_blank" rel="external">Core Animation Programming Guide</a>)</p>
</blockquote>
</li>
</ul>
<p>ç®€è€Œè¨€ä¹‹ï¼ŒanchorPointæ˜¯ä¸€ä¸ªç‚¹ç›¸å¯¹äºlayeræœ¬èº«çš„boundsè€Œè¨€çš„å•å…ƒåæ ‡ï¼Œå®ƒå¯ä»¥æ”¹å˜ï¼›è€Œpositionæ˜¯layerç›¸å¯¹superLayeråæ ‡ç©ºé—´çš„ä½ç½®ã€‚</p>
<p>ä»¥æ¡Œå­ä¸ç™½çº¸ä¸ºä¾‹ï¼Œå¦‚æœå›ºå®šå›¾é’‰åœ¨æ¡Œä¸Šçš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯positonä¸å˜ï¼Œè¿™ä¸ªæ—¶å€™å›¾é’‰å¤„åœ¨ç™½çº¸çš„ä¸åŒåœ°æ–¹å°±æ˜¯ä¸åŒçš„anchorPointï¼Œç›¸åº”åœ°ä¹Ÿå°±æ˜¯ä¸åŒçš„frameã€‚<br>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœå›ºå®šå›¾é’‰åœ¨ç™½çº¸ä¸Šçš„ä½ç½®ï¼ˆæ²¡è®¢åœ¨æ¡Œå­ä¸Šï¼‰ï¼Œä¸ç®¡æ€ä¹ˆå¹³ç§»ç™½çº¸ï¼ŒanchorPointè‚¯å®šæ˜¯ä¸å˜çš„ï¼Œä½†frameè‚¯å®šæ˜¯éšä¹‹å˜åŒ–çš„</p>
<ul>
<li><code>useEvenOddFillRule</code></li>
</ul>
<p>åœ¨çœ‹<a href="https://github.com/kishikawakatsumi/UCZProgressView" target="_blank" rel="external">UCZProgressView</a>çš„ä»£ç æ—¶å‘ç°äº†è¿™ä¹ˆä¸€ä¸ª<code>UIBezierPath</code>çš„å±æ€§ï¼Œè€Œçœ‹èµ·æ¥<code>CAShapeLayer</code>ä¹Ÿæœ‰ç±»ä¼¼çš„å±æ€§ï¼Œå«<code>fillRule</code>ï¼Œå¯ä»¥è®¾ç½®ä¸º<code>kCAFillRuleEvenOdd</code>æˆ–<code>kCAFillRuleNonZero</code>ã€‚é‚£è¿™ä¸ªå±æ€§åˆ°åº•æ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿ<br>è§£é‡Šæ¯”è¾ƒæ¸…æ¥šçš„æ˜¯ä¸€ç¯‡å…³äºSVGè§„èŒƒçš„æ–‡ç« ï¼Œå¥½åœ¨æœ€åŸºæœ¬çš„ç†è®ºéƒ½æ˜¯ç›¸é€šçš„ã€‚</p>
<blockquote>
<p> â€˜fill-ruleâ€™ å±æ€§ç”¨äºæŒ‡å®šä½¿ç”¨å“ªä¸€ç§ç®—æ³•å»åˆ¤æ–­ç”»å¸ƒä¸Šçš„æŸåŒºåŸŸæ˜¯å¦å±äºè¯¥å›¾å½¢â€œå†…éƒ¨â€ ï¼ˆå†…éƒ¨åŒºåŸŸå°†è¢«å¡«å……ï¼‰ã€‚å¯¹ä¸€ä¸ªç®€å•çš„æ— äº¤å‰çš„è·¯å¾„ï¼Œå“ªå—åŒºåŸŸæ˜¯â€œå†…éƒ¨â€ æ˜¯å¾ˆç›´è§‚æ¸…é™¤çš„ã€‚ä½†æ˜¯ï¼Œå¯¹ä¸€ä¸ªå¤æ‚çš„è·¯å¾„ï¼Œæ¯”å¦‚è‡ªç›¸äº¤æˆ–è€…ä¸€ä¸ªå­è·¯å¾„åŒ…å›´å¦ä¸€ä¸ªå­è·¯å¾„ï¼Œâ€œå†…éƒ¨â€çš„ç†è§£å°±ä¸é‚£ä¹ˆæ˜ç¡®äº†ã€‚<br><strong>nonzero</strong><br>å­—é¢æ„æ€æ˜¯â€œéé›¶â€ã€‚æŒ‰è¯¥è§„åˆ™ï¼Œè¦åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨å›¾å½¢å†…ï¼Œä»è¯¥ç‚¹ä½œä»»æ„æ–¹å‘çš„ä¸€æ¡å°„çº¿ï¼Œç„¶åæ£€æµ‹å°„çº¿ä¸å›¾å½¢è·¯å¾„çš„äº¤ç‚¹æƒ…å†µã€‚ä»0å¼€å§‹è®¡æ•°ï¼Œè·¯å¾„ä»å·¦å‘å³ç©¿è¿‡å°„çº¿åˆ™è®¡æ•°åŠ 1ï¼Œä»å³å‘å·¦ç©¿è¿‡å°„çº¿åˆ™è®¡æ•°å‡1ã€‚å¾—å‡ºè®¡æ•°ç»“æœåï¼Œå¦‚æœç»“æœæ˜¯0ï¼Œåˆ™è®¤ä¸ºç‚¹åœ¨å›¾å½¢å¤–éƒ¨ï¼Œå¦åˆ™è®¤ä¸ºåœ¨å†…éƒ¨ã€‚ä¸‹å›¾æ¼”ç¤ºäº†nonzeroè§„åˆ™:<br><img src="https://www.w3.org/TR/SVG/images/painting/fillrule-nonzero.png" alt=""><br><strong>evenodd</strong><br>å­—é¢æ„æ€æ˜¯â€œå¥‡å¶â€ã€‚æŒ‰è¯¥è§„åˆ™ï¼Œè¦åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨å›¾å½¢å†…ï¼Œä»è¯¥ç‚¹ä½œä»»æ„æ–¹å‘çš„ä¸€æ¡å°„çº¿ï¼Œç„¶åæ£€æµ‹å°„çº¿ä¸å›¾å½¢è·¯å¾„çš„äº¤ç‚¹çš„æ•°é‡ã€‚å¦‚æœç»“æœæ˜¯å¥‡æ•°åˆ™è®¤ä¸ºç‚¹åœ¨å†…éƒ¨ï¼Œæ˜¯å¶æ•°åˆ™è®¤ä¸ºç‚¹åœ¨å¤–éƒ¨ã€‚ä¸‹å›¾æ¼”ç¤ºäº†evenodd è§„åˆ™:<br><img src="http://www.w3.org/TR/SVG/images/painting/fillrule-evenodd.png" alt=""></p>
</blockquote>
<p>åˆæƒ³åˆ°äº†ä¹‹å‰åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å®ç°çš„ä¸­é—´æœ‰æ´çš„çŸ©å½¢viewï¼Œç¿»æ¥ç…ä¸€çœ¼ã€‚<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CAShapeLayer</span> *maskWithHole = [<span class="built_in">CAShapeLayer</span> layer];</div><div class="line"></div><div class="line"><span class="comment">// Both frames are defined in the same coordinate system</span></div><div class="line"><span class="built_in">CGRect</span> biggerRect = <span class="built_in">CGRectMake</span>(<span class="number">30</span>, <span class="number">50</span>, <span class="number">120</span>, <span class="number">200</span>);</div><div class="line"><span class="built_in">CGRect</span> smallerRect = <span class="built_in">CGRectMake</span>(<span class="number">80</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">80</span>);</div><div class="line"></div><div class="line"><span class="built_in">UIBezierPath</span> *maskPath = [<span class="built_in">UIBezierPath</span> bezierPath];</div><div class="line">[maskPath moveToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(biggerRect), <span class="built_in">CGRectGetMinY</span>(biggerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(biggerRect), <span class="built_in">CGRectGetMaxY</span>(biggerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMaxX</span>(biggerRect), <span class="built_in">CGRectGetMaxY</span>(biggerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMaxX</span>(biggerRect), <span class="built_in">CGRectGetMinY</span>(biggerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(biggerRect), <span class="built_in">CGRectGetMinY</span>(biggerRect))];</div><div class="line"></div><div class="line">[maskPath moveToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(smallerRect), <span class="built_in">CGRectGetMinY</span>(smallerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(smallerRect), <span class="built_in">CGRectGetMaxY</span>(smallerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMaxX</span>(smallerRect), <span class="built_in">CGRectGetMaxY</span>(smallerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMaxX</span>(smallerRect), <span class="built_in">CGRectGetMinY</span>(smallerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(smallerRect), <span class="built_in">CGRectGetMinY</span>(smallerRect))];</div><div class="line"></div><div class="line">[maskWithHole setPath:[maskPath <span class="built_in">CGPath</span>]];</div><div class="line">**[maskWithHole setFillRule:kCAFillRuleEvenOdd];**</div><div class="line">[maskWithHole setFillColor:[[<span class="built_in">UIColor</span> orangeColor] <span class="built_in">CGColor</span>]];</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ï¼Œä¸ºäº†â€œæœ‰æ´â€ï¼Œæœ€é‡è¦çš„æ˜¯è¿™ä¸€è¡Œ<code>[maskWithHole setFillRule:kCAFillRuleEvenOdd];</code>ã€‚å¦‚æœè®¾ç½®æˆ<code>kCAFillRuleNonZero</code>ï¼ˆå¥½å§ï¼Œè¿™ä¸ªå€¼æ˜¯é»˜è®¤å€¼ï¼‰ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªè´§çœŸä»·å®çš„å®å¿ƒçŸ©å½¢ã€‚å½“æ—¶æ²¡æœ‰æ„è¯†åˆ°è¿™å¥è¯çš„ä½œç”¨ï¼Œç°åœ¨ç»ˆäºæ˜äº†äº†ã€‚</p>
<hr>
<p><strong>Ref:</strong></p>
<ul>
<li>Core Animation Programming Guide:<br><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW15" target="_blank" rel="external">https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW15</a></li>
<li><a href="http://stackoverflow.com/questions/10856353/crop-a-cashapelayer-retrieving-the-external-path" target="_blank" rel="external">http://stackoverflow.com/questions/10856353/crop-a-cashapelayer-retrieving-the-external-path</a></li>
<li><a href="http://blog.csdn.net/cuixiping/article/details/7848369" target="_blank" rel="external">http://blog.csdn.net/cuixiping/article/details/7848369</a></li>
<li><a href="http://stackoverflow.com/questions/14840563/how-does-usesevenoddfillrule-work" target="_blank" rel="external">http://stackoverflow.com/questions/14840563/how-does-usesevenoddfillrule-work</a></li>
</ul>

        </div></article>
      <article class="post">
    <header class="post-header">
      <h1 class="post-title"><a class="post-link" href="/2016/02/25/UIImageWriteToSavedPhotosAlbum/">UIImageWriteToSavedPhotosAlbumä¿å­˜å›¾ç‰‡åˆ°ç³»ç»Ÿç›¸å†Œ</a>
        </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-02-25
        </span></div>
    </header>

    <div class="post-content"><p>ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•æ¥å°†æŒ‡å®šå›¾ç‰‡æ·»åŠ åˆ°ç”¨æˆ·çš„ç›¸å†Œã€‚<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> <span class="built_in">UIImageWriteToSavedPhotosAlbum</span> (</div><div class="line">                        <span class="built_in">UIImage</span> *image,</div><div class="line">                        <span class="keyword">id</span> completionTarget,</div><div class="line">                        SEL completionSelector,</div><div class="line">                    <span class="keyword">void</span> *contextInfo</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>imageï¼šè¦å†™å…¥ç›¸å†Œçš„å›¾ç‰‡ï¼›<br>completionTargetï¼šå¯é€‰é¡¹ï¼Œä¿å­˜å®Œæˆåï¼Œå›è°ƒæ–¹æ³•æ‰€åœ¨çš„å¯¹è±¡ï¼›<br>completionSelectorï¼šè¦è°ƒç”¨çš„<code>completionTarget</code>çš„å›è°ƒæ–¹æ³•ã€‚è¿™ä¸ªå¯é€‰æ–¹æ³•åº”è¯¥éµä»å¦‚ä¸‹æ ¼å¼ï¼š<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(void)                <span class="keyword">image</span>: (UIImage *) <span class="keyword">image</span></div><div class="line">    didFinishSavingWithError: (NSError *) <span class="keyword">error</span></div><div class="line">                 <span class="keyword">contextInfo</span>: (void *) <span class="keyword">contextInfo</span>;</div></pre></td></tr></table></figure></p>
<p>contextInfoï¼šå¯é€‰çš„å‚æ•°ï¼Œä¿å­˜äº†ä¸€ä¸ªæŒ‡å‘contextæ•°æ®çš„æŒ‡é’ˆï¼Œå®ƒå°†ä¼ é€’ç»™å›è°ƒæ–¹æ³•ã€‚</p>
<p>ä¾‹å¦‚ï¼š<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">    <span class="built_in">UIImage</span> *img = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"test.png"</span>];</div><div class="line"><span class="built_in">UIImageWriteToSavedPhotosAlbum</span>(img, <span class="keyword">self</span>, <span class="keyword">@selector</span>(image:didFinishSavingWithError:contextInfo:), <span class="literal">nil</span>);</div></pre></td></tr></table></figure></p>
<p>å›è°ƒæ–¹æ³•é•¿è¿™æ ·ï¼š<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)<span class="keyword">image</span>:(UIImage *)<span class="keyword">image</span></div><div class="line">    didFinishSavingWithError:(NSError *)<span class="keyword">error</span></div><div class="line">                 <span class="keyword">contextInfo</span>:(void *)<span class="keyword">contextInfo</span></div><div class="line">&#123;</div><div class="line">    <span class="comment">// Was there an error?</span></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">error</span> != NULL)</div><div class="line">    &#123;</div><div class="line">      <span class="comment">// Show error message...</span></div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span>  <span class="comment">// No errors</span></div><div class="line">    &#123;</div><div class="line">      <span class="comment">// Show message image successfully saved</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

        </div></article>
      <nav class="pagination"><a class="prev" href="/page/5/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text">Prev</span>
      </a>
    <a class="next" href="/page/7/">
        <span class="next-text">Next</span>
        <i class="iconfont icon-right"></i>
      </a>
    </nav></section></div></div>
      </main>

      <footer id="footer" class="footer"><div class="social-links"><a href="mailto:calios_1124@163.com" class="iconfont icon-email" title="email"></a>
        <a href="http://github.com/caliosd" class="iconfont icon-github" title="github"></a>
        <a href="/atom.xml" class="iconfont icon-rss" title="rss"></a>
    </div><div class="copyright">
  <span class="power-by">
    Powered by <a class="hexo-link" href="https://hexo.io/">Hexo</a>
  </span>
  <span class="division">|</span>
  <span class="theme-info">
    Theme - 
    <a class="theme-link" href="https://github.com/ahonn/hexo-theme-even">Even</a>
  </span>

  <span class="copyright-year">&copy;2015 - 2020<span class="heart">
      <i class="iconfont icon-heart"></i>
    </span>
    <span class="author">Calios</span>
  </span>
</div>
</footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div><script type="text/javascript" src="/lib/jquery/jquery.min.js"></script>
  <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/src/even.js?v=2.11.0"></script>
</body>
</html>
