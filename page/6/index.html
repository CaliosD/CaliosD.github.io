<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="en">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Calios, Calios_1124, CaliosD, Calios' Eden" />










<meta name="description" content="Stedfast as thou art.">
<meta property="og:type" content="website">
<meta property="og:title" content="Calios&#39; Eden">
<meta property="og:url" content="http://www.caliosd.gq/page/6/index.html">
<meta property="og:site_name" content="Calios&#39; Eden">
<meta property="og:description" content="Stedfast as thou art.">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Calios&#39; Eden">
<meta name="twitter:description" content="Stedfast as thou art.">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://www.caliosd.gq/page/6/"/>





  <title>Calios' Eden</title>
  




<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-71292392-1', 'auto');
  ga('send', 'pageview');
</script>





</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Calios' Eden</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">Stedfast as thou art.</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            About
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.caliosd.gq/2016/03/02/crash-related-to-UIVisualEffectView/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Calios">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Calios' Eden">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/02/crash-related-to-UIVisualEffectView/" itemprop="url">Crash related to `UIVisualEffectView`</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-02T16:03:01+08:00">
                03/02/16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å°è¯•åœ¨storyboardä¸­æ·»åŠ äº†ä¸€ä¸ª<code>UIVisualEffectView</code>ï¼Œç„¶ååˆæ·»åŠ äº†å‡ ä¸ªå­è§†å›¾ï¼Œç„¶åï¼Œå°±å’»çš„ä¸€ä¸‹ï¼ŒæŒ‚äº†ã€‚<br><figure class="highlight applescript"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">2016</span><span class="number">-03</span><span class="number">-02</span> <span class="number">14</span>:<span class="number">57</span>:<span class="number">45.953</span> K06-Where[<span class="number">3499</span>:<span class="number">225450</span>] The view hierarchy <span class="keyword">is</span> <span class="keyword">not</span> prepared <span class="keyword">for</span> <span class="keyword">the</span> constraint: &lt;NSLayoutConstraint:<span class="number">0x7f843501d7f0</span> UIView:<span class="number">0x7f843501da50</span>.centerX == UIVisualEffectView:<span class="number">0x7f843501d150</span>.centerX&gt;</div><div class="line">    When added <span class="keyword">to</span> a view, <span class="keyword">the</span> constraint's items must be descendants <span class="keyword">of</span> <span class="keyword">that</span> view (<span class="keyword">or</span> <span class="keyword">the</span> view itself). This will crash <span class="keyword">if</span> <span class="keyword">the</span> constraint needs <span class="keyword">to</span> be resolved <span class="keyword">before</span> <span class="keyword">the</span> view hierarchy <span class="keyword">is</span> assembled. Break <span class="keyword">on</span> -[UIView(UIConstraintBasedLayout) _viewHierarchyUnpreparedForConstraint:] <span class="keyword">to</span> debug.</div><div class="line"><span class="number">2016</span><span class="number">-03</span><span class="number">-02</span> <span class="number">14</span>:<span class="number">57</span>:<span class="number">45.954</span> K06-Where[<span class="number">3499</span>:<span class="number">225450</span>] The view hierarchy <span class="keyword">is</span> <span class="keyword">not</span> prepared <span class="keyword">for</span> <span class="keyword">the</span> constraint: &lt;NSLayoutConstraint:<span class="number">0x7f843501e250</span> UIView:<span class="number">0x7f843501da50</span>.top == UIVisualEffectView:<span class="number">0x7f843501d150</span>.top + <span class="number">66</span>&gt;</div></pre></td></tr></table></figure></p>
<p><code>command + shift + 0</code>æŸ¥ä¸€ä¸‹è‹¹æœçš„æ–‡æ¡£ï¼š</p>
<blockquote>
<p>After you add the visual effect view to the view hierarchy, add any subviews to the contentView property of the visual effect view. Do not add subviews directly to the visual effect view itself. (From <a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIVisualEffectView/index.html#//apple_ref/occ/cl/UIVisualEffectView" title="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIVisualEffectView/index.html#//apple_ref/occ/cl/UIVisualEffectView" target="_blank" rel="external">ğŸ</a>)</p>
</blockquote>
<p>å¦‚åŒ<code>UITableViewCell</code>ä¸€æ ·ï¼Œ<code>UIVisualEffectView</code>æœ‰è‡ªå·±çš„<code>contentView</code>ã€‚æ‰€ä»¥ï¼Œä¸ç®¡æ˜¯æ·»åŠ å­è§†å›¾ï¼Œè¿˜æ˜¯æ·»åŠ å­è§†å›¾ç›¸å…³çš„çº¦æŸï¼Œéƒ½åº”è¯¥åŠ åœ¨è¿™ä¸ª<code>contentView</code>ä¸Šï¼Œè€Œä¸æ˜¯ç›´æ¥åŠ åˆ°<code>UIVisualEffectView</code>ä¸Šã€‚ä¸Šé¢çš„crashå°±æ˜¯ç”±äºå­è§†å›¾æ·»åŠ çš„çº¦æŸä¸ç¬¦åˆè§†å›¾æ ‘çš„è§„åˆ™å¯¼è‡´çš„ã€‚</p>
<p>çŸ¥é“äº†è¿™äº›ï¼ŒæŠŠåŸæœ¬æ·»åŠ åœ¨<code>UIVisualEffectView</code>çš„çº¦æŸåˆ æ‰ï¼Œæ”¹ä¸ºæ·»åŠ åˆ°å®ƒçš„<code>contentView</code>ä¸Šã€‚Overï½</p>
<hr>
<p><strong> Ref: </strong></p>
<ul>
<li><a href="https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIVisualEffectView/index.html#//apple_ref/occ/cl/UIVisualEffectView" target="_blank" rel="external">https://developer.apple.com/library/prerelease/ios/documentation/UIKit/Reference/UIVisualEffectView/index.html#//apple_ref/occ/cl/UIVisualEffectView</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.caliosd.gq/2016/03/02/corelocation-authorization-in-iOS8/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Calios">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Calios' Eden">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/03/02/corelocation-authorization-in-iOS8/" itemprop="url">CoreLocation Authorization in iOS8+</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-03-02T15:59:32+08:00">
                03/02/16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h5 id="1-CoreLocationManagerä¸­æ–°å¢çš„æ–¹æ³•"><a href="#1-CoreLocationManagerä¸­æ–°å¢çš„æ–¹æ³•" class="headerlink" title="1.CoreLocationManagerä¸­æ–°å¢çš„æ–¹æ³•"></a>1.<code>CoreLocationManager</code>ä¸­æ–°å¢çš„æ–¹æ³•</h5><p>iOS8åœ¨ä½ç½®è·å–æƒé™ä¸Šåšäº†æ›´ç»†çš„åˆ’åˆ†ï¼Œä¹Ÿå°±æ˜¯è¯´ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©å…è®¸appåœ¨åå°ä½¿ç”¨ä½ç½®ä¿¡æ¯ã€åœ¨ä½¿ç”¨æœŸé—´ä½¿ç”¨ä½ç½®ä¿¡æ¯æˆ–è€…ä¸å…è®¸ä½¿ç”¨ä½ç½®ä¿¡æ¯ã€‚</p>
<p>å› æ­¤ï¼Œåœ¨<code>CLLocationManager</code>ä¸­æ·»åŠ äº†å¦‚ä¸‹ä¸¤ä¸ªæ–¹æ³•ï¼š</p>
<ul>
<li><code>requestWhenInUseAuthorization()</code>: å‘ç”¨æˆ·è¯·æ±‚åªåœ¨appä½¿ç”¨æœŸé—´è·å–ä½ç½®ä¿¡æ¯çš„æƒé™ã€‚</li>
<li><code>requestAlwaysAuthorization()</code>: å‘ç”¨æˆ·è¯·æ±‚appåœ¨åå°ä½¿ç”¨ä½ç½®ä¿¡æ¯çš„æƒé™ã€‚</li>
</ul>
<figure class="highlight stylus"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">locationManager = CLLocationManager()</div><div class="line">locationManager<span class="selector-class">.delegate</span> = self</div><div class="line">locationManager<span class="selector-class">.desiredAccuracy</span> = kCLLocationAccuracyBest</div><div class="line">locationManager.requestAlwaysAuthorization()</div><div class="line">locationManager.startUpdatingLocation()</div></pre></td></tr></table></figure>
<h5 id="2-æä¾›è¯´æ˜ä¿¡æ¯"><a href="#2-æä¾›è¯´æ˜ä¿¡æ¯" class="headerlink" title="2.æä¾›è¯´æ˜ä¿¡æ¯"></a>2.æä¾›è¯´æ˜ä¿¡æ¯</h5><p><code>CoreLocation</code>éœ€è¦ç»™ç”¨æˆ·å±•ç¤ºä¸€ä¸ªä¿¡æ¯ï¼Œå‘Šè¯‰ä»–ä»¬ä¸ºä»€ä¹ˆéœ€è¦ä½¿ç”¨ä»–ä»¬çš„ä½ç½®ä¿¡æ¯ã€‚è¿™ä¸ªå±•ç¤ºçš„ä¿¡æ¯ï¼Œå«â€œusage stringâ€ï¼Œå¯ä»¥åœ¨info.plistæ–‡ä»¶ä¸­è®¾ç½®ã€‚</p>
<p>ç„¶è€Œï¼Œä¸‹æ‹‰åˆ—è¡¨ä¸­æ‰¾åˆ°çš„å”¯ä¸€ç›¸å…³çš„<code>NSLocationUsageDescription</code>è²Œä¼¼ä¸èµ·ä»€ä¹ˆä½œç”¨ã€‚</p>
<p><img src="http://7xkwcv.com1.z0.glb.clouddn.com/16-3-22/41359249.jpg" alt=""></p>
<p>å› ä¸º<code>NSLocationUsageDescription</code>åœ¨iOS8åŠiOS8+ä¸­éƒ½è¢«å¿½ç•¥æ‰äº†ã€‚åŒæ—¶ï¼Œæœ‰ä¸¤ä¸ªæ–°çš„keyè¢«å¼•å…¥è¿›æ¥ã€‚</p>
<ul>
<li><code>NSLocationAlwaysUsageDescription</code>:å‰åå°å‡å…è®¸ä½¿ç”¨</li>
<li><code>NSLocationWhenInUseUsageDescription</code>: åªå…è®¸å‰å°ä½¿ç”¨</li>
</ul>
<p>è²Œä¼¼Xcodeå¹¶æ²¡æœ‰æ›´æ–°ä¸‹æ‹‰åˆ—è¡¨ä¸­çš„å†…å®¹ï¼Œæ‰€ä»¥åªèƒ½æ‰‹åŠ¨è¾“å…¥keyäº†ã€‚</p>
<p><img src="http://7xkwcv.com1.z0.glb.clouddn.com/16-3-22/65397100.jpg" alt=""></p>
<p>åœ¨iPhoneä¸­ç›¸åº”çš„è®¾ç½®ä¿¡æ¯å¯ä»¥åœ¨è¿™é‡Œçœ‹åˆ°ï¼š</p>
<p><img src="http://7xkwcv.com1.z0.glb.clouddn.com/16-3-22/37636479.jpg" alt=""></p>
<p><img src="http://7xkwcv.com1.z0.glb.clouddn.com/16-3-22/21834545.jpg" alt=""></p>
<p>å“¦äº†ï¼ŒK06-Whereç»“æŸäº†ã€‚å›å½’åœ°çƒã€‚</p>
<hr>
<p><strong>Ref:</strong></p>
<p>éƒ¨åˆ†å†…å®¹ç¿»è¯‘è‡ªï¼š<br><a href="https://www.shinobicontrols.com/blog/ios8-day-by-day-day-34-corelocation-authorization" target="_blank" rel="external">https://www.shinobicontrols.com/blog/ios8-day-by-day-day-34-corelocation-authorization</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.caliosd.gq/2016/02/29/tips-for-AppleScript/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Calios">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Calios' Eden">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/29/tips-for-AppleScript/" itemprop="url">å…³äºAppleScriptçš„ç‚¹æ»´</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-29T18:21:58+08:00">
                02/29/16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>1.AppleScriptç»ˆæå…¥é—¨æ‰‹å†Œï¼š</p>
<ul>
<li>ä¸­æ–‡ç‰ˆï¼š<a href="http://blog.csdn.net/yang3wei/article/details/7964226" target="_blank" rel="external">http://blog.csdn.net/yang3wei/article/details/7964226</a></li>
<li>è‹±æ–‡ç‰ˆï¼š<a href="http://computers.tutsplus.com/tutorials/the-ultimate-beginners-guide-to-applescript--mac-3436" target="_blank" rel="external">http://computers.tutsplus.com/tutorials/the-ultimate-beginners-guide-to-applescriptâ€“mac-3436</a></li>
</ul>
<p>2.ä¿å­˜åˆ°æœ¬åœ°çš„.scptæ–‡ä»¶å¦‚ä½•åœ¨terminalä¸­è¿è¡Œï¼Ÿ<br><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">$</span><span class="bash"> osascript myScript.scpt</span></div></pre></td></tr></table></figure></p>
<p>3.æ›´å¤šèµ„æ–™è§ğŸå®˜ç½‘ï¼š</p>
<ul>
<li><a href="https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/introduction/ASLR_intro.html" target="_blank" rel="external">https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptLangGuide/introduction/ASLR_intro.html</a></li>
<li><a href="https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptX/AppleScriptX.html" target="_blank" rel="external">https://developer.apple.com/library/mac/documentation/AppleScript/Conceptual/AppleScriptX/AppleScriptX.html</a></li>
</ul>
<p>4.å»¶ä¼¸æ€è€ƒï¼š</p>
<ul>
<li>IFTTTçš„å®ç°åŸç†ï¼Ÿ</li>
<li>OS Xçš„app Automatorå¦‚ä½•ä½¿ç”¨ï¼Ÿæ˜¯å¦æä¾›äº†æ›´å¥½çš„æ–¹å¼æ¥æé«˜ç”Ÿäº§æ•ˆç‡ï¼Ÿ</li>
<li>å›åˆ°æŠ˜è…¾AppleScriptçš„åŸå§‹é—®é¢˜ï¼šåœ¨å†™markdownè¿‡ç¨‹ä¸­ï¼Œå°†å‰ªåˆ‡æ¿çš„å›¾ç‰‡è‡ªåŠ¨ä¸Šä¼ åˆ°ä¸ƒç‰›ï¼Œå¹¶ç”ŸæˆURLè¿”å›åˆ°å‰ªåˆ‡ç‰ˆï¼Œæ–¹ä¾¿åœ¨markdownä¸­æ’å…¥å›¾ç‰‡ã€‚è¿™ä¸ªå°åŠŸèƒ½ï¼Œè¯¥å¦‚ä½•å®ç°ï¼Ÿï¼ˆå»ºè®®ä½†ä¸å±€é™äºpythonå’ŒAppleScriptã€‚ï¼‰</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.caliosd.gq/2016/02/29/toll-free bridging/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Calios">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Calios' Eden">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/29/toll-free bridging/" itemprop="url">Toll-free bridging</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-29T15:47:58+08:00">
                02/29/16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>æ‰€è°“çš„Toll-free bridgingæ˜¯è¯´å¯ä»¥åœ¨æŸä¸ªæ¡†æ¶çš„æ–¹æ³•æˆ–å‡½æ•°åŒæ—¶ä½¿ç”¨Core Foundatioå’ŒFoundation æ¡†æ¶ä¸­çš„æŸäº›ç±»å‹ã€‚å¾ˆå¤šæ•°æ®ç±»å‹æ”¯æŒè¿™ä¸€ç‰¹æ€§ï¼Œå…¶ä¸­åŒ…æ‹¬ç¾¤ä½“å’Œå­—ç¬¦ä¸²æ•°æ®ç±»å‹ã€‚æ¯ä¸ªæ¡†æ¶çš„ç±»å’Œç±»å‹æè¿°éƒ½ä¼šå¯¹æŸä¸ªå¯¹è±¡æ˜¯å¦ä¸º toll-Free bridgedï¼Œåº”å’Œä»€ä¹ˆå¯¹è±¡æ¡¥æ¥è¿›è¡Œè¯´æ˜ã€‚<br>ç±»å‹è½¬æ¢å…³é”®å­—åŒºåˆ«ï¼š</p>
<ul>
<li>__bridge ï¼ˆç›¸å½“äºassignï¼Œè¿˜æ˜¯è¦è‡ªå·±ç®¡ç†å¯¹è±¡ï¼‰</li>
<li>__bridge_transferï¼ˆç›¸å½“äºcopyåreleaseï¼Œè½¬è®©äº†è‡ªå·±å¯¹å¯¹è±¡çš„æ‰€æœ‰æƒäº¤ç»™åˆ«äººå»ç®¡ç†ï¼‰</li>
<li>__bridge_retainedï¼ˆç›¸å½“äºretainï¼Œå¢åŠ é¢å¯¹è±¡çš„å¼•ç”¨è®¡æ•°ï¼‰  </li>
</ul>
<p>åŒæ—¶ä¹Ÿè¦æ³¨æ„åœ¨æ²¡æœ‰ARCå’Œxcode4.2ååŠ å…¥ARCçš„ä½¿ç”¨æ—¶çš„åŒºåˆ«</p>
</blockquote>
<p>æ›´å¤šå†…å®¹è§Lancyçš„<a href="http://gracelancy.com/blog/2014/04/21/toll-free-bridging/" title="http://gracelancy.com/blog/2014/04/21/toll-free-bridging/" target="_blank" rel="external">è¿™ç¯‡è®²è§£</a>å’Œè‹¹æœçš„æ–‡æ¡£<a href="https://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaEncyclopedia/Toll-FreeBridgin/Toll-FreeBridgin.html" title="https://developer.apple.com/library/ios/documentation/General/Conceptual/CocoaEncyclopedia/Toll-FreeBridgin/Toll-FreeBridgin.html" target="_blank" rel="external">Toll-Free Bridging</a>ã€‚</p>
<hr>
<p><strong>Ref:</strong></p>
<ul>
<li><a href="http://blog.ibireme.com/2015/05/18/runloop/" target="_blank" rel="external">http://blog.ibireme.com/2015/05/18/runloop/</a></li>
<li><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html" target="_blank" rel="external">https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/RunLoopManagement/RunLoopManagement.html</a></li>
<li><a href="http://chun.tips/blog/2014/10/20/zou-jin-run-loopde-shi-jie-[?]-:shi-yao-shi-run-loop?/" target="_blank" rel="external">http://chun.tips/blog/2014/10/20/zou-jin-run-loopde-shi-jie-%5B%3F%5D-:shi-yao-shi-run-loop%3F/</a></li>
<li>Toll-free bridgedï¼š<a href="http://gracelancy.com/blog/2014/04/21/toll-free-bridging/" target="_blank" rel="external">http://gracelancy.com/blog/2014/04/21/toll-free-bridging/</a></li>
<li>è°ƒç”¨æ ˆï¼š<a href="http://blog.chinaunix.net/uid-20760757-id-1872359.html" target="_blank" rel="external">http://blog.chinaunix.net/uid-20760757-id-1872359.html</a></li>
<li>RunLoopæºä»£ç ï¼š<a href="http://opensource.apple.com/source/CF/CF-855.17/CFRunLoop.c" target="_blank" rel="external">http://opensource.apple.com/source/CF/CF-855.17/CFRunLoop.c</a></li>
<li><a href="http://blog.cnbluebox.com/blog/2014/07/01/cocoashen-ru-xue-xi-nsoperationqueuehe-nsoperationyuan-li-he-shi-yong/" target="_blank" rel="external">http://blog.cnbluebox.com/blog/2014/07/01/cocoashen-ru-xue-xi-nsoperationqueuehe-nsoperationyuan-li-he-shi-yong/</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.caliosd.gq/2016/02/29/points-in-CoreAnimation/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Calios">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Calios' Eden">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/29/points-in-CoreAnimation/" itemprop="url">CoreAnimationçš„å‡ ä¸ªçŸ¥è¯†ç‚¹</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-29T15:40:33+08:00">
                02/29/16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <ul>
<li><strong>çŸ¢é‡å›¾ vs ä½å›¾ï¼ˆæ …æ ¼å›¾ï¼‰</strong></li>
</ul>
<p><img src="https://upload.wikimedia.org/wikipedia/commons/a/ac/VectorGraphicsExample.jpg" alt="ï¼ˆaï¼‰åŸå§‹çŸ¢é‡å›¾ï¼›ï¼ˆbï¼‰çŸ¢é‡å›¾æ”¾å¤§8å€ï¼›ï¼ˆcï¼‰ä½å›¾æ”¾å¤§8å€ã€‚ä½å›¾çš„æ”¾å¤§è´¨é‡è¾ƒå·®ï¼Œä½†æ˜¯çŸ¢é‡å›¾å¯ä»¥ä¸é™ä½è´¨é‡åœ°æ— é™æ”¾å¤§ã€‚" title="çŸ¢é‡å›¾å’Œä½å›¾æ˜¾ç¤ºæ•ˆæœå¯¹æ¯”"></p>
<p><strong>çŸ¢é‡å›¾ï¼ˆvectorï¼‰</strong>ï¼Œä¹Ÿå«å‘é‡å›¾ï¼Œæ˜¯é€šè¿‡å¤šä¸ªå¯¹è±¡ç»„åˆç”Ÿæˆçš„ï¼Œå¯¹äºå…¶ä¸­æ¯ä¸€ä¸ªå¯¹è±¡çš„è®°å½•æ–¹å¼éƒ½æ˜¯ä»¥æ•°å­¦å‡½æ•°æ¥å®ç°çš„ï¼Œç¼©æ”¾ä¸å¤±çœŸã€‚å¸¸ç”¨çš„çŸ¢é‡ç»˜åˆ¶è½¯ä»¶æœ‰Adobe Illustratorã€Freehandã€Flashç­‰ã€‚<br><strong>ä½å›¾ï¼ˆbitmapï¼‰</strong>ï¼Œä¹Ÿå«æ …æ ¼å›¾ã€åƒç´ å›¾ï¼Œå³æœ€å°å•ä½ç”±åƒç´ æ„æˆçš„å›¾ï¼Œå¯æ“ä½œå¯¹è±¡æ˜¯åƒç´ ï¼Œå¯ä»¥æ”¹å˜å›¾åƒçš„é¥±å’Œåº¦ã€æ˜åº¦å’Œè‰²ç›¸ï¼Œç¼©æ”¾ä¼šå¤±çœŸã€‚å¸¸ç”¨çš„ä½å›¾ç»˜åˆ¶è½¯ä»¶æœ‰Adobe Photoshopç­‰ã€‚</p>
<ul>
<li>å¯¹äº<code>position</code>å’Œ<code>anchorPoint</code>å…³ç³»çš„ç†è§£<blockquote>
<p>Point-based coordinates are used when specifying values that map directly to screen coordinates or must be specified relative to another layer, such as for the layerâ€™s position property. Unit coordinates are used when the value should not be tied to screen coordinates because it is relative to some other value. For example, the layerâ€™s anchorPoint property specifies a point relative to the bounds of the layer itself, which can change. (<a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW15" target="_blank" rel="external">Core Animation Programming Guide</a>)</p>
</blockquote>
</li>
</ul>
<p>ç®€è€Œè¨€ä¹‹ï¼ŒanchorPointæ˜¯ä¸€ä¸ªç‚¹ç›¸å¯¹äºlayeræœ¬èº«çš„boundsè€Œè¨€çš„å•å…ƒåæ ‡ï¼Œå®ƒå¯ä»¥æ”¹å˜ï¼›è€Œpositionæ˜¯layerç›¸å¯¹superLayeråæ ‡ç©ºé—´çš„ä½ç½®ã€‚</p>
<p>ä»¥æ¡Œå­ä¸ç™½çº¸ä¸ºä¾‹ï¼Œå¦‚æœå›ºå®šå›¾é’‰åœ¨æ¡Œä¸Šçš„ä½ç½®ï¼Œä¹Ÿå°±æ˜¯positonä¸å˜ï¼Œè¿™ä¸ªæ—¶å€™å›¾é’‰å¤„åœ¨ç™½çº¸çš„ä¸åŒåœ°æ–¹å°±æ˜¯ä¸åŒçš„anchorPointï¼Œç›¸åº”åœ°ä¹Ÿå°±æ˜¯ä¸åŒçš„frameã€‚<br>å¦ä¸€æ–¹é¢ï¼Œå¦‚æœå›ºå®šå›¾é’‰åœ¨ç™½çº¸ä¸Šçš„ä½ç½®ï¼ˆæ²¡è®¢åœ¨æ¡Œå­ä¸Šï¼‰ï¼Œä¸ç®¡æ€ä¹ˆå¹³ç§»ç™½çº¸ï¼ŒanchorPointè‚¯å®šæ˜¯ä¸å˜çš„ï¼Œä½†frameè‚¯å®šæ˜¯éšä¹‹å˜åŒ–çš„</p>
<ul>
<li><code>useEvenOddFillRule</code></li>
</ul>
<p>åœ¨çœ‹<a href="https://github.com/kishikawakatsumi/UCZProgressView" target="_blank" rel="external">UCZProgressView</a>çš„ä»£ç æ—¶å‘ç°äº†è¿™ä¹ˆä¸€ä¸ª<code>UIBezierPath</code>çš„å±æ€§ï¼Œè€Œçœ‹èµ·æ¥<code>CAShapeLayer</code>ä¹Ÿæœ‰ç±»ä¼¼çš„å±æ€§ï¼Œå«<code>fillRule</code>ï¼Œå¯ä»¥è®¾ç½®ä¸º<code>kCAFillRuleEvenOdd</code>æˆ–<code>kCAFillRuleNonZero</code>ã€‚é‚£è¿™ä¸ªå±æ€§åˆ°åº•æ˜¯åšä»€ä¹ˆçš„å‘¢ï¼Ÿ<br>è§£é‡Šæ¯”è¾ƒæ¸…æ¥šçš„æ˜¯ä¸€ç¯‡å…³äºSVGè§„èŒƒçš„æ–‡ç« ï¼Œå¥½åœ¨æœ€åŸºæœ¬çš„ç†è®ºéƒ½æ˜¯ç›¸é€šçš„ã€‚</p>
<blockquote>
<p> â€˜fill-ruleâ€™ å±æ€§ç”¨äºæŒ‡å®šä½¿ç”¨å“ªä¸€ç§ç®—æ³•å»åˆ¤æ–­ç”»å¸ƒä¸Šçš„æŸåŒºåŸŸæ˜¯å¦å±äºè¯¥å›¾å½¢â€œå†…éƒ¨â€ ï¼ˆå†…éƒ¨åŒºåŸŸå°†è¢«å¡«å……ï¼‰ã€‚å¯¹ä¸€ä¸ªç®€å•çš„æ— äº¤å‰çš„è·¯å¾„ï¼Œå“ªå—åŒºåŸŸæ˜¯â€œå†…éƒ¨â€ æ˜¯å¾ˆç›´è§‚æ¸…é™¤çš„ã€‚ä½†æ˜¯ï¼Œå¯¹ä¸€ä¸ªå¤æ‚çš„è·¯å¾„ï¼Œæ¯”å¦‚è‡ªç›¸äº¤æˆ–è€…ä¸€ä¸ªå­è·¯å¾„åŒ…å›´å¦ä¸€ä¸ªå­è·¯å¾„ï¼Œâ€œå†…éƒ¨â€çš„ç†è§£å°±ä¸é‚£ä¹ˆæ˜ç¡®äº†ã€‚<br><strong>nonzero</strong><br>å­—é¢æ„æ€æ˜¯â€œéé›¶â€ã€‚æŒ‰è¯¥è§„åˆ™ï¼Œè¦åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨å›¾å½¢å†…ï¼Œä»è¯¥ç‚¹ä½œä»»æ„æ–¹å‘çš„ä¸€æ¡å°„çº¿ï¼Œç„¶åæ£€æµ‹å°„çº¿ä¸å›¾å½¢è·¯å¾„çš„äº¤ç‚¹æƒ…å†µã€‚ä»0å¼€å§‹è®¡æ•°ï¼Œè·¯å¾„ä»å·¦å‘å³ç©¿è¿‡å°„çº¿åˆ™è®¡æ•°åŠ 1ï¼Œä»å³å‘å·¦ç©¿è¿‡å°„çº¿åˆ™è®¡æ•°å‡1ã€‚å¾—å‡ºè®¡æ•°ç»“æœåï¼Œå¦‚æœç»“æœæ˜¯0ï¼Œåˆ™è®¤ä¸ºç‚¹åœ¨å›¾å½¢å¤–éƒ¨ï¼Œå¦åˆ™è®¤ä¸ºåœ¨å†…éƒ¨ã€‚ä¸‹å›¾æ¼”ç¤ºäº†nonzeroè§„åˆ™:<br><img src="https://www.w3.org/TR/SVG/images/painting/fillrule-nonzero.png" alt=""><br><strong>evenodd</strong><br>å­—é¢æ„æ€æ˜¯â€œå¥‡å¶â€ã€‚æŒ‰è¯¥è§„åˆ™ï¼Œè¦åˆ¤æ–­ä¸€ä¸ªç‚¹æ˜¯å¦åœ¨å›¾å½¢å†…ï¼Œä»è¯¥ç‚¹ä½œä»»æ„æ–¹å‘çš„ä¸€æ¡å°„çº¿ï¼Œç„¶åæ£€æµ‹å°„çº¿ä¸å›¾å½¢è·¯å¾„çš„äº¤ç‚¹çš„æ•°é‡ã€‚å¦‚æœç»“æœæ˜¯å¥‡æ•°åˆ™è®¤ä¸ºç‚¹åœ¨å†…éƒ¨ï¼Œæ˜¯å¶æ•°åˆ™è®¤ä¸ºç‚¹åœ¨å¤–éƒ¨ã€‚ä¸‹å›¾æ¼”ç¤ºäº†evenodd è§„åˆ™:<br><img src="http://www.w3.org/TR/SVG/images/painting/fillrule-evenodd.png" alt=""></p>
</blockquote>
<p>åˆæƒ³åˆ°äº†ä¹‹å‰åœ¨ä¸€ä¸ªé¡¹ç›®ä¸­å®ç°çš„ä¸­é—´æœ‰æ´çš„çŸ©å½¢viewï¼Œç¿»æ¥ç…ä¸€çœ¼ã€‚<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">CAShapeLayer</span> *maskWithHole = [<span class="built_in">CAShapeLayer</span> layer];</div><div class="line"></div><div class="line"><span class="comment">// Both frames are defined in the same coordinate system</span></div><div class="line"><span class="built_in">CGRect</span> biggerRect = <span class="built_in">CGRectMake</span>(<span class="number">30</span>, <span class="number">50</span>, <span class="number">120</span>, <span class="number">200</span>);</div><div class="line"><span class="built_in">CGRect</span> smallerRect = <span class="built_in">CGRectMake</span>(<span class="number">80</span>, <span class="number">100</span>, <span class="number">50</span>, <span class="number">80</span>);</div><div class="line"></div><div class="line"><span class="built_in">UIBezierPath</span> *maskPath = [<span class="built_in">UIBezierPath</span> bezierPath];</div><div class="line">[maskPath moveToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(biggerRect), <span class="built_in">CGRectGetMinY</span>(biggerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(biggerRect), <span class="built_in">CGRectGetMaxY</span>(biggerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMaxX</span>(biggerRect), <span class="built_in">CGRectGetMaxY</span>(biggerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMaxX</span>(biggerRect), <span class="built_in">CGRectGetMinY</span>(biggerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(biggerRect), <span class="built_in">CGRectGetMinY</span>(biggerRect))];</div><div class="line"></div><div class="line">[maskPath moveToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(smallerRect), <span class="built_in">CGRectGetMinY</span>(smallerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(smallerRect), <span class="built_in">CGRectGetMaxY</span>(smallerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMaxX</span>(smallerRect), <span class="built_in">CGRectGetMaxY</span>(smallerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMaxX</span>(smallerRect), <span class="built_in">CGRectGetMinY</span>(smallerRect))];</div><div class="line">[maskPath addLineToPoint:<span class="built_in">CGPointMake</span>(<span class="built_in">CGRectGetMinX</span>(smallerRect), <span class="built_in">CGRectGetMinY</span>(smallerRect))];</div><div class="line"></div><div class="line">[maskWithHole setPath:[maskPath <span class="built_in">CGPath</span>]];</div><div class="line">**[maskWithHole setFillRule:kCAFillRuleEvenOdd];**</div><div class="line">[maskWithHole setFillColor:[[<span class="built_in">UIColor</span> orangeColor] <span class="built_in">CGColor</span>]];</div></pre></td></tr></table></figure></p>
<p>æ‰€ä»¥ï¼Œä¸ºäº†â€œæœ‰æ´â€ï¼Œæœ€é‡è¦çš„æ˜¯è¿™ä¸€è¡Œ<code>[maskWithHole setFillRule:kCAFillRuleEvenOdd];</code>ã€‚å¦‚æœè®¾ç½®æˆ<code>kCAFillRuleNonZero</code>ï¼ˆå¥½å§ï¼Œè¿™ä¸ªå€¼æ˜¯é»˜è®¤å€¼ï¼‰ï¼Œå°±ä¼šå¾—åˆ°ä¸€ä¸ªè´§çœŸä»·å®çš„å®å¿ƒçŸ©å½¢ã€‚å½“æ—¶æ²¡æœ‰æ„è¯†åˆ°è¿™å¥è¯çš„ä½œç”¨ï¼Œç°åœ¨ç»ˆäºæ˜äº†äº†ã€‚</p>
<hr>
<p><strong>Ref:</strong></p>
<ul>
<li>Core Animation Programming Guide:<br><a href="https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW15" target="_blank" rel="external">https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW15</a></li>
<li><a href="http://stackoverflow.com/questions/10856353/crop-a-cashapelayer-retrieving-the-external-path" target="_blank" rel="external">http://stackoverflow.com/questions/10856353/crop-a-cashapelayer-retrieving-the-external-path</a></li>
<li><a href="http://blog.csdn.net/cuixiping/article/details/7848369" target="_blank" rel="external">http://blog.csdn.net/cuixiping/article/details/7848369</a></li>
<li><a href="http://stackoverflow.com/questions/14840563/how-does-usesevenoddfillrule-work" target="_blank" rel="external">http://stackoverflow.com/questions/14840563/how-does-usesevenoddfillrule-work</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.caliosd.gq/2016/02/25/UIImageWriteToSavedPhotosAlbum/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Calios">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Calios' Eden">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/25/UIImageWriteToSavedPhotosAlbum/" itemprop="url">UIImageWriteToSavedPhotosAlbumä¿å­˜å›¾ç‰‡åˆ°ç³»ç»Ÿç›¸å†Œ</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-25T10:36:34+08:00">
                02/25/16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>ä½ å¯ä»¥ä½¿ç”¨å¦‚ä¸‹æ–¹æ³•æ¥å°†æŒ‡å®šå›¾ç‰‡æ·»åŠ åˆ°ç”¨æˆ·çš„ç›¸å†Œã€‚<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">void</span> <span class="built_in">UIImageWriteToSavedPhotosAlbum</span> (</div><div class="line">                        <span class="built_in">UIImage</span> *image,</div><div class="line">                        <span class="keyword">id</span> completionTarget,</div><div class="line">                        SEL completionSelector,</div><div class="line">                    <span class="keyword">void</span> *contextInfo</div><div class="line">);</div></pre></td></tr></table></figure></p>
<p>imageï¼šè¦å†™å…¥ç›¸å†Œçš„å›¾ç‰‡ï¼›<br>completionTargetï¼šå¯é€‰é¡¹ï¼Œä¿å­˜å®Œæˆåï¼Œå›è°ƒæ–¹æ³•æ‰€åœ¨çš„å¯¹è±¡ï¼›<br>completionSelectorï¼šè¦è°ƒç”¨çš„<code>completionTarget</code>çš„å›è°ƒæ–¹æ³•ã€‚è¿™ä¸ªå¯é€‰æ–¹æ³•åº”è¯¥éµä»å¦‚ä¸‹æ ¼å¼ï¼š<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">-(void)                <span class="keyword">image</span>: (UIImage *) <span class="keyword">image</span></div><div class="line">    didFinishSavingWithError: (NSError *) <span class="keyword">error</span></div><div class="line">                 <span class="keyword">contextInfo</span>: (void *) <span class="keyword">contextInfo</span>;</div></pre></td></tr></table></figure></p>
<p>contextInfoï¼šå¯é€‰çš„å‚æ•°ï¼Œä¿å­˜äº†ä¸€ä¸ªæŒ‡å‘contextæ•°æ®çš„æŒ‡é’ˆï¼Œå®ƒå°†ä¼ é€’ç»™å›è°ƒæ–¹æ³•ã€‚</p>
<p>ä¾‹å¦‚ï¼š<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">    <span class="built_in">UIImage</span> *img = [<span class="built_in">UIImage</span> imageNamed:<span class="string">@"test.png"</span>];</div><div class="line"><span class="built_in">UIImageWriteToSavedPhotosAlbum</span>(img, <span class="keyword">self</span>, <span class="keyword">@selector</span>(image:didFinishSavingWithError:contextInfo:), <span class="literal">nil</span>);</div></pre></td></tr></table></figure></p>
<p>å›è°ƒæ–¹æ³•é•¿è¿™æ ·ï¼š<br><figure class="highlight mel"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">- (void)<span class="keyword">image</span>:(UIImage *)<span class="keyword">image</span></div><div class="line">    didFinishSavingWithError:(NSError *)<span class="keyword">error</span></div><div class="line">                 <span class="keyword">contextInfo</span>:(void *)<span class="keyword">contextInfo</span></div><div class="line">&#123;</div><div class="line">    <span class="comment">// Was there an error?</span></div><div class="line">    <span class="keyword">if</span> (<span class="keyword">error</span> != NULL)</div><div class="line">    &#123;</div><div class="line">      <span class="comment">// Show error message...</span></div><div class="line"></div><div class="line">    &#125;</div><div class="line">    <span class="keyword">else</span>  <span class="comment">// No errors</span></div><div class="line">    &#123;</div><div class="line">      <span class="comment">// Show message image successfully saved</span></div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.caliosd.gq/2016/02/24/how-not-to-crash-9-mindset/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Calios">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Calios' Eden">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/24/how-not-to-crash-9-mindset/" itemprop="url">ã€è¯‘ã€‘å¦‚ä½•é¿å…ç¨‹åºå´©æºƒ-9ï¼šå¿ƒæ€</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-24T16:35:27+08:00">
                02/24/16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong>é¢˜å¤–è¯ï¼š</strong></p>
<p>è·ç¦»<a href="http://www.caliosd.gq/2016/01/21/how-not-to-crash-8-infrastructure/" title="http://www.caliosd.gq/2016/01/21/how-not-to-crash-8-infrastructure/">ä¸Šä¸€ç¯‡</a>å·²ç»ä¸€ä¸ªæœˆäº†ï¼Œç»ˆäºæŠ½å‡ºä¸€ç‚¹æ—¶é—´æ¥æŠŠæœ€åä¸€ç¯‡å®Œç»“ã€‚å™«ååš±ï¼</p>
<p>åŸæ–‡é“¾æ¥ï¼š<a href="http://inessential.com/2015/06/10/how_not_to_crash_9_mindset" target="_blank" rel="external">http://inessential.com/2015/06/10/how_not_to_crash_9_mindset</a></p>
<hr>
<p>ä½ çŸ¥é“å—ï¼Ÿè€è¯è¯´å¾—å¥½ï¼Œâ€œä¸è¦å†™åƒä½ ä¸€æ ·èªæ˜çš„ä»£ç ï¼Œå› ä¸ºéœ€è¦æ¯”ä½ <em> æ›´èªæ˜</em> çš„äººæ¥debugã€‚â€</p>
<p>æˆ‘è¿‡å»ä¸€ç›´è®¤ä¸ºè¿™æ„å‘³ç€æˆ‘åº”è¯¥å†™æœ‰æˆ‘80%èªæ˜çš„ä»£ç ã€‚ç•™ä¸€ç‚¹ç”¨æ¥debugã€‚</p>
<p>ä½†éšç€æ—¶é—´æ¨ç§»ï¼Œæˆ‘å¼€å§‹è§‰å¾—æˆ‘åº”è¯¥å†™æœ‰æˆ‘10%èªæ˜çš„ä»£ç ã€‚æˆ‘å¼€å§‹ç›¸ä¿¡ï¼ŒçœŸæ­£çš„èªæ˜æ˜¯è®©ä»£ç è¶³å¤Ÿç®€æ´æ˜äº†ã€ä»¥è‡³äºçœ‹èµ·æ¥æ¯«æ— ç‰¹å¾ã€‚</p>
<p>è¿™å°±æ˜¯ä¸ºä»€ä¹ˆæˆ‘æªå®ˆè¿™æ ·çš„è§„åˆ™ï¼š<a href="http://www.caliosd.gq/2015/11/19/how-not-to-crash-4-threading/">é™¤éåšå¯ä»¥å®Œå…¨ç‹¬ç«‹çš„äº‹æƒ…ï¼Œå¦åˆ™ä¸€åˆ‡äº‹æƒ…éƒ½æ”¾åœ¨ä¸»çº¿ç¨‹ä¸Šåš</a>ï¼›<a href="http://www.caliosd.gq/2015/11/26/how-not-to-crash-6-properties-and-accessories/">å°½é‡é¿å…ä½¿ç”¨unsafe_unretained</a>ç­‰ç­‰ã€‚</p>
<p>è¿™æ„å‘³ç€æˆ‘ä¸ä¼šå› ä¸ºæˆä¸ºä¸€ä¸ªä»£ç é­”æœ¯æ‰‹è€Œè·å¾—é¢å¤–çš„åŠ åˆ†ã€‚æˆ‘ä¸ä¼šæŠŠå…”å­ä»å¸½å­é‡Œæ‹–å‡ºæ¥ï¼Œå½“ç„¶ä¹Ÿä¸ä¼šå»èµ°é’¢ä¸ã€‚æˆ‘ç”šè‡³éƒ½ä¸ä¼šå»<em>çœ‹</em>é’¢ä¸ã€‚</p>
<p>å¦‚æœéœ€è¦ï¼Œæˆ‘ä¼šå»åšå›°éš¾çš„äº‹æƒ…ï¼Œä½†æ˜¯å³ä½¿æ˜¯å›°éš¾çš„äº‹æƒ…ï¼Œæœ€ç»ˆçš„ç›®çš„ä¹Ÿæ˜¯å°½æˆ‘æ‰€èƒ½åœ°å†™å‡ºç®€æ´è€Œå¯è¯»æ€§å¾ˆé«˜çš„ä»£ç ã€‚å¦‚æœæœ€åä»£ç çœ‹èµ·æ¥å¾ˆç®€å• â€”â€” ç»™äººå°è±¡ä¸æ·±ï¼Œç”šè‡³å¥½åƒä¸€ä¸ªåˆä¸­ç”Ÿéƒ½èƒ½å†™å‡ºæ¥ â€”â€” é‚£è¯´æ˜ä»£ç <em>ä¸é”™</em>ã€‚</p>
<p>å¾€å°äº†è¯´ï¼Œè¿™æ„å‘³ç€å‡½æ•°éƒ½å¾ˆçŸ­å°ï¼Œè¾ƒå°‘ä½¿ç”¨åµŒå¥—ã€‚å¾€å¤§äº†è¯´ï¼Œæ¶æ„å’Œå‘½åé™¤éè¿«ä¸å¾—å·²ï¼Œå¦åˆ™ä¸ä¼šè¢«è¿­ä»£ï¼Œå°±å¥½åƒå®ƒæ²¡æœ‰åšä»€ä¹ˆè€ƒè™‘ä¸€æ ·ï¼Œå› ä¸ºéƒ½å·²ç»è¶³å¤Ÿæ˜æ˜¾äº†ã€‚</p>
<p>è¿™æ„å‘³ç€ä¸ä¼šè¿‡åº¦æŠ½è±¡ã€‚ç²¾ç¡®æ„å‘³ç€æ˜¾è€Œæ˜“è§ã€‚ä½†ä¹Ÿæ„å‘³ç€ä¸ä¼šå¤ªè¿‡æ¦‚åŒ– â€”â€” çš„ç¡®æœ‰æ—¶å€™ä¸¤ä¸‰ä»¶äº‹å…¶å®æ˜¯åŒä¸€ä»¶äº‹ï¼Œè¿™æ—¶å®ƒä»¬å¯ä»¥åœ¨ä¸å½±å“å¯ç»´æŠ¤æ€§çš„å‰æä¸‹æ¦‚æ‹¬èµ·æ¥ã€‚ï¼ˆå½“ç„¶ï¼Œæœ‰æ—¶å€™ä¸èƒ½è¿™ä¹ˆåšã€‚ï¼‰</p>
<p>æˆ‘é¿å…ç´§è¿æ¥å’Œåºå¤§çš„æ¶æ„ â€”â€” é™¤éæ˜¯æœ€ä¼˜æ–¹æ¡ˆçš„ç¡®æ˜¯è®©xçŸ¥é“yã€‚</p>
<p>æˆ‘åšæŒå­¦ä¹ ï¼Œè®©è‡ªå·±æ—¥æ¸æˆé•¿ã€‚</p>
<h4 id="æ—¶é—´"><a href="#æ—¶é—´" class="headerlink" title="æ—¶é—´"></a>æ—¶é—´</h4><p>ç¼–ç¨‹å’Œç»˜ç”»ã€å†™ä½œã€å»ºç­‘ã€è°±æ›²çš„åŒºåˆ«åœ¨äºï¼Œå®ƒæ²¡æœ‰å®Œç»“çš„äº§å“ã€‚æ˜¯çš„ï¼Œæœ‰å‘å¸ƒçš„ç‰ˆæœ¬ï¼Œä½†æ˜¯æ²¡æœ‰ç»“æŸï¼Œåªæœ‰æ”¾å¼ƒã€‚</p>
<p>ä»£ç å­˜åœ¨äºæ—¶é—´ä¸­ï¼Œå¯èƒ½ä¹Ÿä¼šç»æ‰‹å¾ˆå¤šäºº â€”â€” ä½ æ·±çŸ¥ä¸çŸ¥é“ä¼šæœ‰å¤šä¹…æˆ–è€…ä¼šæœ‰è°ã€‚ä½ æ°¸è¿œä¸è¯¥å¿˜äº†è¿™ä¸€ç‚¹ã€‚</p>
<h4 id="æŠ«è‚©ï¼Œé¢å…·"><a href="#æŠ«è‚©ï¼Œé¢å…·" class="headerlink" title="æŠ«è‚©ï¼Œé¢å…·"></a>æŠ«è‚©ï¼Œé¢å…·</h4><p>åœ¨æˆ‘å¹´è½»çš„æ—¶å€™ï¼Œæˆ‘æƒ³æˆä¸ºä¸€ä¸ªä»£ç é­”æœ¯æ‰‹ â€”â€” æˆ–è€…è¯´ï¼ŒçœŸæ­£çš„<em>è‹±é›„</em>ã€‚ä½†æˆ‘é€æ¸è®¤è¯†åˆ°ï¼Œ<em>è½¯ä»¶çš„å®é™…è´¨é‡è¦æ¯”æˆ‘æœŸæœ›åˆ«äººæ€ä¹ˆçœ‹æˆ‘é‡è¦å¾—å¤š</em>ã€‚</p>
<p>æ›´è¿›ä¸€æ­¥è¯´ï¼Œè´¨é‡æ˜¯ä¸€ç§è¿‘ä¹ç²¾ç¥ä¸Šçš„å¥–åŠ±ã€‚å®ƒæ˜¯ä¸€ç§ä¸ºé‡äºè‡ªæˆ‘çš„äº‹æƒ…å¥‰çŒ®çš„è¡Œä¸ºï¼Œæ—¢è‡ªç§åˆæ— ç§ã€‚</p>
<p>è‡ªç§ï¼Œæ˜¯å› ä¸ºä¸ºäº†è´¨é‡å¥‹æ–—çš„è¿‡ç¨‹è®©ä½ æ—¥æ¸æˆé•¿ã€‚è€Œæ— ç§ï¼Œæ˜¯å› ä¸ºæ›´å¥½çš„ä»£ç ã€æ›´å¥½çš„è½¯ä»¶å¯¹å…¶ä»–äººæ›´æœ‰ç›Šã€‚</p>
<p>å½“å…¶ä»–äººå¯¹ä½ çš„è½¯ä»¶æœ‰æ‰€è¦æ±‚ï¼Œé¦–è¦çš„å°±æ˜¯å¦‚æœä»–ä»¬å¯åŠ¨äº†å®ƒï¼Œå®ƒæ˜¯å¦èƒ½<em>ä¿æŒç€</em>å¯åŠ¨çš„çŠ¶æ€ã€‚ä»»ä½•ä¸èƒ½å¯¹æ­¤é—®é¢˜è¶³å¤Ÿé‡è§†çš„ç¨‹åºå‘˜ â€”â€” æˆ–æ˜¯é‚£äº›æ€»æ˜¯å°†å´©æºƒç²‰é¥°æˆç”Ÿæ´»å¸¸æ€çš„äºº â€”â€” æˆ‘ä»¬å¯ä»¥ä¼˜å…ˆå……åˆ†åœ°äº«å—å…¶ä¸­çš„å·¨å¤§ä¹è¶£ï¼Œè€Œè¿™äº›äººæ— æ³•ä½“ä¼šã€‚</p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.caliosd.gq/2016/02/22/reverse-NSArray/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Calios">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Calios' Eden">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/22/reverse-NSArray/" itemprop="url">å¦‚ä½•ç¿»è½¬NSArray</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-22T14:16:01+08:00">
                02/22/16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>å…¶å®<code>NSArray</code>ä¸­æä¾›äº†ç°æˆçš„<code>-reverseObjectEnumerator</code>æ–¹æ³•ã€‚<br><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">NSArray *startArray = @[@<span class="string">"1"</span>,@<span class="string">"2"</span>,@<span class="string">"3"</span>,@<span class="string">"4"</span>]<span class="comment">;</span></div><div class="line">NSArray* reversedArray = [[startArray reverseObjectEnumerator] allObjects]<span class="comment">;</span></div><div class="line">NSLog(@<span class="string">"---- %@"</span>,reversedArray)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<p>æ§åˆ¶å°æ‰“å°å‡ºæ¥çš„ä¿¡æ¯å¦‚ä¸‹ï¼š<br><figure class="highlight less"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="selector-tag">2016-02-22</span> <span class="selector-tag">14</span><span class="selector-pseudo">:13</span><span class="selector-pseudo">:23.539</span> <span class="selector-tag">Demo</span><span class="selector-attr">[1158:258529]</span> <span class="selector-tag">----</span> (</div><div class="line">    <span class="number">4</span>,</div><div class="line">    <span class="number">3</span>,</div><div class="line">    <span class="number">2</span>,</div><div class="line">    <span class="number">1</span></div><div class="line">)</div></pre></td></tr></table></figure></p>
<hr>
<p><strong>Ref: </strong></p>
<p><a href="http://stackoverflow.com/a/586529/1594792" target="_blank" rel="external">http://stackoverflow.com/a/586529/1594792</a></p>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://www.caliosd.gq/2016/02/19/notes-for-multi-thread-programming/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Calios">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Calios' Eden">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2016/02/19/notes-for-multi-thread-programming/" itemprop="url">iOSå¼€å‘å¤šçº¿ç¨‹å­¦ä¹ ç¬”è®°-1</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2016-02-19T11:13:25+08:00">
                02/19/16
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="çº¿ç¨‹åŸºç¡€"><a href="#çº¿ç¨‹åŸºç¡€" class="headerlink" title="çº¿ç¨‹åŸºç¡€"></a>çº¿ç¨‹åŸºç¡€</h3><h5 id="1-ä¸»çº¿ç¨‹"><a href="#1-ä¸»çº¿ç¨‹" class="headerlink" title="1.ä¸»çº¿ç¨‹"></a>1.ä¸»çº¿ç¨‹</h5><p>ä¸€ä¸ªiOSç¨‹åºè¿è¡Œåï¼Œé»˜è®¤ä¼šå¼€å¯1æ¡çº¿ç¨‹ï¼Œç§°ä¸ºâ€œä¸»çº¿ç¨‹â€æˆ–â€œUIçº¿ç¨‹â€<br>ä¸»çº¿ç¨‹çš„ä¸»è¦ä½œç”¨ï¼š</p>
<ul>
<li>æ˜¾ç¤º/åˆ·æ–°UIç•Œé¢</li>
<li>å¤„ç†UIäº‹ä»¶ï¼ˆæ¯”å¦‚ç‚¹å‡»äº‹ä»¶ã€æ»šåŠ¨äº‹ä»¶ã€æ‹–æ‹½äº‹ä»¶ç­‰ï¼‰</li>
</ul>
<h5 id="2-åˆ›å»ºçº¿ç¨‹"><a href="#2-åˆ›å»ºçº¿ç¨‹" class="headerlink" title="2.åˆ›å»ºçº¿ç¨‹"></a>2.åˆ›å»ºçº¿ç¨‹</h5><figure class="highlight groovy"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 1.Create a thread.</span></div><div class="line"><span class="comment">// 1-1. Normal initialize.</span></div><div class="line">    NSThread *thread = [[NSThread alloc] <span class="string">initWithTarget:</span>self <span class="string">selector:</span><span class="meta">@selector</span>(<span class="string">run:</span>) <span class="string">object:</span>@<span class="string">"1-1. Normal initialize."</span>];</div><div class="line">    thread.name = @<span class="string">"Thread A"</span>;</div><div class="line"><span class="comment">// 1-2. Auto-start after created.</span></div><div class="line">    [NSThread <span class="string">detachNewThreadSelector:</span><span class="meta">@selector</span>(<span class="string">run:</span>) <span class="string">toTarget:</span>self <span class="string">withObject:</span>@<span class="string">"1-2. Auto-start after created."</span>];</div><div class="line"><span class="comment">// 1-3. Invisibly create and start thread.</span></div><div class="line">    [self <span class="string">performSelectorInBackground:</span><span class="meta">@selector</span>(<span class="string">run:</span>) <span class="string">withObject:</span>@<span class="string">"1-3. Invisibly create and start thread."</span>];</div><div class="line"><span class="comment">// 1-2 &amp; 1-3: easy and handy, but cannot add more detail configuration.</span></div></pre></td></tr></table></figure>
<h5 id="3-å¼€å¯çº¿ç¨‹"><a href="#3-å¼€å¯çº¿ç¨‹" class="headerlink" title="3.å¼€å¯çº¿ç¨‹"></a>3.å¼€å¯çº¿ç¨‹</h5><figure class="highlight autohotkey"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">// Once started, method `run` will be executed in <span class="keyword">thread</span> above.</div><div class="line">  [<span class="keyword">thread</span> start]<span class="comment">;</span></div></pre></td></tr></table></figure>
<h5 id="4-çº¿ç¨‹çš„æ­»äº¡"><a href="#4-çº¿ç¨‹çš„æ­»äº¡" class="headerlink" title="4.çº¿ç¨‹çš„æ­»äº¡"></a>4.çº¿ç¨‹çš„æ­»äº¡</h5><p>å½“çº¿ç¨‹çš„ä»»åŠ¡ç»“æŸï¼Œå‘ç”Ÿå¼‚å¸¸ï¼Œæˆ–è€…æ˜¯å¼ºåˆ¶é€€å‡ºè¿™ä¸‰ç§æƒ…å†µä¼šå¯¼è‡´çº¿ç¨‹çš„æ­»äº¡ã€‚<br>çº¿ç¨‹æ­»äº¡åï¼Œçº¿ç¨‹å¯¹è±¡ä»å†…å­˜ä¸­ç§»é™¤ã€‚</p>
<h5 id="5-è§£å†³å¤šçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºçš„é—®é¢˜ï¼šäº’æ–¥é”"><a href="#5-è§£å†³å¤šçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºçš„é—®é¢˜ï¼šäº’æ–¥é”" class="headerlink" title="5.è§£å†³å¤šçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºçš„é—®é¢˜ï¼šäº’æ–¥é”"></a>5.è§£å†³å¤šçº¿ç¨‹è®¿é—®åŒä¸€èµ„æºçš„é—®é¢˜ï¼šäº’æ–¥é”</h5><figure class="highlight kotlin"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@synchronized(é”å¯¹è±¡)</span> &#123; <span class="comment">// éœ€è¦é”å®šçš„ä»£ç   &#125;</span></div></pre></td></tr></table></figure>
<p><strong> æ³¨æ„ï¼š</strong></p>
<ul>
<li>é”å®š1ä»½ä»£ç åªç”¨1æŠŠé”ï¼Œç”¨å¤šæŠŠé”æ˜¯æ— æ•ˆçš„ã€‚</li>
<li>äº’æ–¥é”ï¼Œå°±æ˜¯ä½¿ç”¨äº†çº¿ç¨‹åŒæ­¥æŠ€æœ¯ã€‚</li>
<li>äº’æ–¥é”çš„ç¼ºç‚¹æ˜¯éœ€è¦æ¶ˆè€—å¤§é‡CPUèµ„æºã€‚</li>
</ul>
<h5 id="6-åŸå­å’ŒéåŸå­å±æ€§"><a href="#6-åŸå­å’ŒéåŸå­å±æ€§" class="headerlink" title="6.åŸå­å’ŒéåŸå­å±æ€§"></a>6.åŸå­å’ŒéåŸå­å±æ€§</h5><p>OCåœ¨å®šä¹‰å±æ€§æ—¶æœ‰nonatomicå’Œatomicä¸¤ç§é€‰æ‹©ï¼š</p>
<ul>
<li>atomicï¼šåŸå­å±æ€§ï¼Œä¸ºsetteræ–¹æ³•åŠ é”ï¼ˆé»˜è®¤å°±æ˜¯atomicï¼‰ï¼Œçº¿ç¨‹å®‰å…¨ï¼Œéœ€è¦æ¶ˆè€—å¤§é‡çš„èµ„æºï¼›</li>
<li>nonatomicï¼šéåŸå­å±æ€§ï¼Œä¸ä¼šä¸ºsetteræ–¹æ³•åŠ é”ï¼Œéçº¿ç¨‹å®‰å…¨ï¼Œé€‚åˆå†…å­˜å°çš„ç§»åŠ¨è®¾å¤‡ã€‚</li>
</ul>
<h5 id="7-çº¿ç¨‹é—´é€šä¿¡å¸¸ç”¨æ–¹æ³•"><a href="#7-çº¿ç¨‹é—´é€šä¿¡å¸¸ç”¨æ–¹æ³•" class="headerlink" title="7.çº¿ç¨‹é—´é€šä¿¡å¸¸ç”¨æ–¹æ³•"></a>7.çº¿ç¨‹é—´é€šä¿¡å¸¸ç”¨æ–¹æ³•</h5><figure class="highlight erlang"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">-Â <span class="params">(void)</span>performSelectorOnMainThread:<span class="params">(SEL)</span>aSelectorÂ withObject:<span class="params">(id)</span>argÂ waitUntilDone:<span class="params">(BOOL)</span>wait;</div><div class="line">-Â <span class="params">(void)</span>performSelector:<span class="params">(SEL)</span>aSelectorÂ onThread:<span class="params">(NSThreadÂ *)</span>thrÂ withObject:<span class="params">(id)</span>argÂ waitUntilDone:<span class="params">(BOOL)</span>wait;</div></pre></td></tr></table></figure>
<h5 id="8-å…³äºiOSå¼€å‘çš„å»ºè®®ï¼š"><a href="#8-å…³äºiOSå¼€å‘çš„å»ºè®®ï¼š" class="headerlink" title="8.å…³äºiOSå¼€å‘çš„å»ºè®®ï¼š"></a>8.å…³äºiOSå¼€å‘çš„å»ºè®®ï¼š</h5><ul>
<li>æ‰€æœ‰å±æ€§éƒ½å£°æ˜ä¸ºnonatomicï¼›</li>
<li>å°½é‡é¿å…å¤šçº¿ç¨‹æŠ¢å¤ºåŒä¸€å—èµ„æºï¼›</li>
<li>å°½é‡å°†åŠ é”ã€èµ„æºæŠ¢å¤ºçš„ä¸šåŠ¡é€»è¾‘äº¤ç»™æœåŠ¡å™¨ç«¯å¤„ç†ï¼Œå‡å°ç§»åŠ¨å®¢æˆ·ç«¯çš„å‹åŠ›ã€‚</li>
</ul>
<h3 id="GCD"><a href="#GCD" class="headerlink" title="GCD"></a>GCD</h3><h5 id="1-GCDç®€ä»‹ï¼š"><a href="#1-GCDç®€ä»‹ï¼š" class="headerlink" title="1.GCDç®€ä»‹ï¼š"></a>1.GCDç®€ä»‹ï¼š</h5><p>å³Grand Central Dispatchï¼Œçº¯Cè¯­è¨€ï¼Œæä¾›äº†éå¸¸å¤šå¼ºå¤§çš„å‡½æ•°ã€‚</p>
<h5 id="2-GCDçš„ä¼˜åŠ¿ï¼š"><a href="#2-GCDçš„ä¼˜åŠ¿ï¼š" class="headerlink" title="2.GCDçš„ä¼˜åŠ¿ï¼š"></a>2.GCDçš„ä¼˜åŠ¿ï¼š</h5><ul>
<li>GCDæ˜¯è‹¹æœå…¬å¸ä¸ºå¤šæ ¸çš„å¹¶è¡Œè¿ç®—æå‡ºçš„è§£å†³æ–¹æ¡ˆï¼›</li>
<li>GCDä¼šè‡ªåŠ¨åˆ©ç”¨æ›´å¤šçš„CPUå†…æ ¸ï¼ˆæ¯”å¦‚åŒæ ¸ã€å››æ ¸ï¼‰ï¼›</li>
<li>GCDä¼šè‡ªåŠ¨ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼ˆåˆ›å»ºçº¿ç¨‹ã€è°ƒåº¦ä»»åŠ¡ã€é”€æ¯çº¿ç¨‹ï¼‰ï¼›</li>
<li>ç¨‹åºå‘˜åªéœ€è¦å‘Šè¯‰GCDæƒ³è¦æ‰§è¡Œä»€ä¹ˆä»»åŠ¡ï¼Œä¸éœ€è¦ç¼–å†™ä»»ä½•çº¿ç¨‹ç®¡ç†ä»£ç ã€‚</li>
</ul>
<h5 id="3-æç¤ºï¼š"><a href="#3-æç¤ºï¼š" class="headerlink" title="3.æç¤ºï¼š"></a>3.æç¤ºï¼š</h5><ul>
<li>GCDå­˜åœ¨äºlibdispatch.dylibè¿™ä¸ªåº“ä¸­ï¼Œè¿™ä¸ªè°ƒåº¦åº“åŒ…å«äº†GCDçš„æ‰€æœ‰çš„ä¸œè¥¿ï¼Œä½†ä»»ä½•IOSç¨‹åºï¼Œé»˜è®¤å°±åŠ è½½äº†è¿™ä¸ªåº“ï¼Œåœ¨ç¨‹åºè¿è¡Œçš„è¿‡ç¨‹ä¸­ä¼šåŠ¨æ€çš„åŠ è½½è¿™ä¸ªåº“ï¼Œä¸éœ€è¦æˆ‘ä»¬æ‰‹åŠ¨å¯¼å…¥ã€‚</li>
<li>GCDæ˜¯çº¯Cè¯­è¨€çš„ï¼Œæ‰€ä»¥ç›¸å…³çš„ä»£ç æ˜¯å‡½æ•°ï¼Œè€Œä¸æ˜¯æ–¹æ³•ã€‚æ–¹æ³•æ˜¯åŸºäºå¯¹è±¡çš„ï¼Œè€Œå‡½æ•°åˆ™ç‹¬ç«‹äºå¯¹è±¡ï¼ˆæ›´å¤šå‡½æ•° vs æ–¹æ³•çš„è®¨è®ºè§<a href="http://stackoverflow.com/questions/155609/difference-between-a-method-and-a-function" title="http://stackoverflow.com/questions/155609/difference-between-a-method-and-a-function" target="_blank" rel="external">è¿™é‡Œ</a>ï¼‰ã€‚</li>
<li>GCDä¸­çš„å‡½æ•°å¤§å¤šæ•°éƒ½ä»¥dispatchå¼€å¤´ã€‚</li>
<li>GCDçš„æ•°æ®ç±»å‹åœ¨ARCçš„ç¯å¢ƒä¸‹ä¸éœ€è¦å†åšreleaseã€‚</li>
<li>CFï¼ˆCore Foundationï¼‰çš„æ•°æ®ç±»å‹åœ¨ARCç¯å¢ƒä¸‹è¿˜æ˜¯éœ€è¦åšreleaseã€‚</li>
</ul>
<h5 id="4-ä»»åŠ¡å’Œé˜Ÿåˆ—"><a href="#4-ä»»åŠ¡å’Œé˜Ÿåˆ—" class="headerlink" title="4.ä»»åŠ¡å’Œé˜Ÿåˆ—"></a>4.ä»»åŠ¡å’Œé˜Ÿåˆ—</h5><ul>
<li><p>GCDä¸­æœ‰2ä¸ªæ ¸å¿ƒæ¦‚å¿µ<br>  ï¼ˆ1ï¼‰ä»»åŠ¡ï¼šæ‰§è¡Œä»€ä¹ˆæ“ä½œ<br>  ï¼ˆ2ï¼‰é˜Ÿåˆ—ï¼šç”¨æ¥å­˜æ”¾ä»»åŠ¡</p>
</li>
<li><p>GCDçš„ä½¿ç”¨å°±2ä¸ªæ­¥éª¤<br>  ï¼ˆ1ï¼‰å®šåˆ¶ä»»åŠ¡<br>  ï¼ˆ2ï¼‰ç¡®å®šæƒ³åšçš„äº‹æƒ…</p>
</li>
</ul>
<p>å°†ä»»åŠ¡æ·»åŠ åˆ°é˜Ÿåˆ—ä¸­ï¼ŒGCDä¼šè‡ªåŠ¨å°†é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡å–å‡ºï¼Œæ”¾åˆ°å¯¹åº”çš„çº¿ç¨‹ä¸­æ‰§è¡Œã€‚<br>æç¤ºï¼šä»»åŠ¡çš„å–å‡ºéµå¾ªé˜Ÿåˆ—çš„FIFOåŸåˆ™ï¼šå…ˆè¿›å…ˆå‡ºï¼Œåè¿›åå‡ºã€‚</p>
<h5 id="5-æ‰§è¡Œä»»åŠ¡"><a href="#5-æ‰§è¡Œä»»åŠ¡" class="headerlink" title="5.æ‰§è¡Œä»»åŠ¡"></a>5.æ‰§è¡Œä»»åŠ¡</h5><p>å°†<code>block</code>ï¼ˆä»»åŠ¡ï¼‰äº¤ç»™<code>queue</code>ï¼ˆé˜Ÿåˆ—ï¼‰æ‰§è¡Œã€‚</p>
<p>åŒæ­¥ï¼š<code>dispatch_sync(dispatch_queue_t queue, dispatch_block_t block);</code><br>å¼‚æ­¥ï¼š<code>dispatch_async(dispatch_queue_t queue, dispatch_block_t block);</code></p>
<h5 id="6-é˜Ÿåˆ—"><a href="#6-é˜Ÿåˆ—" class="headerlink" title="6.é˜Ÿåˆ—"></a>6.é˜Ÿåˆ—</h5><p>GCDçš„é˜Ÿåˆ—åˆ†ä¸¤ç±»ï¼š</p>
<ul>
<li>å¹¶å‘é˜Ÿåˆ—ï¼ˆConcurrent Dispatch Queueï¼‰ï¼šä»…åœ¨å¼‚æ­¥å‡½æ•°ä¸‹æœ‰æ•ˆï¼›</li>
<li>ä¸²è¡Œé˜Ÿåˆ—ï¼ˆSerial Dispatch Queueï¼‰ã€‚</li>
</ul>
<p>åŒºåˆ†<strong>åŒæ­¥ã€å¼‚æ­¥ã€å¹¶å‘ã€ä¸²è¡Œ</strong>ï¼š</p>
<ul>
<li><p>åŒæ­¥å’Œå¼‚æ­¥å†³å®šäº†è¦ä¸è¦å¼€å¯æ–°çš„çº¿ç¨‹ï¼š</p>
<ul>
<li>åŒæ­¥ï¼šåœ¨å½“å‰çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œä¸å…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ›</li>
<li>å¼‚æ­¥ï¼šåœ¨æ–°çš„çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ï¼Œå…·å¤‡å¼€å¯æ–°çº¿ç¨‹çš„èƒ½åŠ›</li>
</ul>
</li>
<li><p>å¹¶å‘å’Œä¸²è¡Œå†³å®šäº†ä»»åŠ¡çš„æ‰§è¡Œæ–¹å¼ï¼š</p>
<ul>
<li>å¹¶å‘ï¼šå¤šä¸ªä»»åŠ¡å¹¶å‘ï¼ˆåŒæ—¶ï¼‰æ‰§è¡Œ</li>
<li>ä¸²è¡Œï¼šä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæ¯•åï¼Œå†æ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡</li>
</ul>
</li>
</ul>
<h5 id="7-ä¸²è¡Œé˜Ÿåˆ—ï¼š"><a href="#7-ä¸²è¡Œé˜Ÿåˆ—ï¼š" class="headerlink" title="7.ä¸²è¡Œé˜Ÿåˆ—ï¼š"></a>7.ä¸²è¡Œé˜Ÿåˆ—ï¼š</h5><p>GCDä¸­è·å¾—ä¸²è¡Œæœ‰2ç§é€”å¾„ï¼š<br>ï¼ˆ1ï¼‰ä½¿ç”¨<code>dispatch_queue_create</code>å‡½æ•°åˆ›å»ºä¸²è¡Œé˜Ÿåˆ—<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">	<span class="keyword">dispatch_queue_t</span> Â dispatch_queue_create(<span class="keyword">const</span> <span class="keyword">char</span> *label, Â <span class="keyword">dispatch_queue_attr_t</span> attr); <span class="comment">//Â é˜Ÿåˆ—åç§°ï¼Œ é˜Ÿåˆ—å±æ€§ï¼Œä¸€èˆ¬ç”¨NULLå³å¯</span></div><div class="line">ç¤ºä¾‹ï¼š</div><div class="line"></div><div class="line">	<span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_queue_create(<span class="string">"myTestQueue"</span>, <span class="literal">NULL</span>); <span class="comment">// åˆ›å»º</span></div><div class="line">	dispatch_release(<span class="built_in">queue</span>); <span class="comment">// éARCéœ€è¦é‡Šæ”¾æ‰‹åŠ¨åˆ›å»ºçš„é˜Ÿåˆ—</span></div></pre></td></tr></table></figure></p>
<p>ï¼ˆ2ï¼‰ä½¿ç”¨ä¸»é˜Ÿåˆ—ï¼ˆè·Ÿä¸»çº¿ç¨‹ç›¸å…³è”çš„é˜Ÿåˆ—ï¼‰</p>
<p>ä¸»é˜Ÿåˆ—æ˜¯GCDè‡ªå¸¦çš„ä¸€ç§ç‰¹æ®Šçš„ä¸²è¡Œé˜Ÿåˆ—,æ”¾åœ¨ä¸»é˜Ÿåˆ—ä¸­çš„ä»»åŠ¡ï¼Œéƒ½ä¼šæ”¾åˆ°ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œã€‚ä½¿ç”¨<code>dispatch_get_main_queue()</code>è·å¾—ä¸»é˜Ÿåˆ—ã€‚</p>
<p>ç¤ºä¾‹ï¼š<br><figure class="highlight routeros"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t<span class="built_in"> queue </span>= dispatch_get_main_queue();</div></pre></td></tr></table></figure></p>
<p><strong> æ³¨ï¼š</strong></p>
<ul>
<li>å¦‚æœæŠŠä»»åŠ¡æ”¾åˆ°ä¸»é˜Ÿåˆ—ä¸­è¿›è¡Œå¤„ç†ï¼Œé‚£ä¹ˆä¸è®ºå¤„ç†å‡½æ•°æ˜¯å¼‚æ­¥çš„è¿˜æ˜¯åŒæ­¥çš„éƒ½ä¸ä¼šå¼€å¯æ–°çš„çº¿ç¨‹ã€‚</li>
<li>è¦ä½¿ç”¨å¼‚æ­¥å‡½æ•°ï¼å¦‚æœä½¿ç”¨åŒæ­¥å‡½æ•°ï¼Œåœ¨ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œä¸»é˜Ÿåˆ—ä¸­å¾—ä»»åŠ¡ï¼Œä¼šå‘ç”Ÿæ­»å¾ªç¯ï¼Œä»»åŠ¡æ— æ³•å¾€ä¸‹æ‰§è¡Œã€‚</li>
</ul>
<h5 id="8-å¹¶è¡Œé˜Ÿåˆ—"><a href="#8-å¹¶è¡Œé˜Ÿåˆ—" class="headerlink" title="8.å¹¶è¡Œé˜Ÿåˆ—"></a>8.å¹¶è¡Œé˜Ÿåˆ—</h5><p>GCDé»˜è®¤å·²ç»æä¾›äº†å…¨å±€çš„å¹¶å‘é˜Ÿåˆ—ï¼Œä¾›æ•´ä¸ªåº”ç”¨ä½¿ç”¨ï¼Œä¸éœ€è¦æ‰‹åŠ¨åˆ›å»ºã€‚<br>ä½¿ç”¨<code>dispatch_get_global_queue</code>å‡½æ•°è·å¾—å…¨å±€çš„å¹¶å‘é˜Ÿåˆ—ã€‚<br><figure class="highlight cpp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">	<span class="keyword">dispatch_queue_t</span> dispatch_get_global_queue(<span class="keyword">dispatch_queue_priority_t</span> priority,<span class="keyword">unsigned</span> <span class="keyword">long</span> flags);</div><div class="line">ç¤ºä¾‹ï¼š</div><div class="line">ç¬¬ä¸€ä¸ªå‚æ•°ä¸ºä¼˜å…ˆçº§ï¼Œè¿™é‡Œé€‰æ‹©é»˜è®¤çš„ã€‚ç¬¬äºŒä¸ªflagså‚æ•°æš‚æ—¶æ— ç”¨ï¼Œç”¨<span class="number">0</span>å³å¯ã€‚è·å–ä¸€ä¸ªå…¨å±€çš„é»˜è®¤ä¼˜å…ˆçº§çš„å¹¶å‘é˜Ÿåˆ—ã€‚</div><div class="line"></div><div class="line">	<span class="keyword">dispatch_queue_t</span> <span class="built_in">queue</span> = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, <span class="number">0</span>); <span class="comment">// è·å¾—å…¨å±€å¹¶å‘é˜Ÿåˆ—</span></div></pre></td></tr></table></figure></p>
<h5 id="9-çº¿ç¨‹é—´é€šä¿¡"><a href="#9-çº¿ç¨‹é—´é€šä¿¡" class="headerlink" title="9.çº¿ç¨‹é—´é€šä¿¡"></a>9.çº¿ç¨‹é—´é€šä¿¡</h5><p>ä»å­çº¿ç¨‹å›åˆ°ä¸»çº¿ç¨‹ï¼š<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">dispatch_async( <span class="name">dispatch_get_global_queue</span>(<span class="name">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>, <span class="number">0</span>), ^&#123;</div><div class="line">    // æ‰§â¾è€—æ—¶çš„å¼‚æ­¥æ“ä½œ...</div><div class="line">    dispatch_async(<span class="name">dispatch_get_main_queue</span>(), ^&#123;</div><div class="line">        // å›åˆ°ä¸»çº¿ç¨‹,æ‰§â¾UIåˆ·æ–°æ“ä½œ</div><div class="line">    &#125;)<span class="comment">;</span></div><div class="line">&#125;)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<h5 id="10-å¸¸è§ç”¨æ³•"><a href="#10-å¸¸è§ç”¨æ³•" class="headerlink" title="10.å¸¸è§ç”¨æ³•"></a>10.å¸¸è§ç”¨æ³•</h5><ul>
<li><strong>å»¶è¿Ÿæ‰§è¡Œ</strong></li>
</ul>
<p>iOSå¸¸è§çš„å»¶æ—¶æ‰§è¡Œæœ‰2ç§æ–¹å¼<br>ï¼ˆ1ï¼‰è°ƒç”¨NSObjectçš„æ–¹æ³•<code>[self performSelector:@selector(run) withObject:nil afterDelay:2.0];</code>ã€‚è¯¥æ–¹æ³•åœ¨é‚£ä¸ªçº¿ç¨‹è°ƒç”¨ï¼Œé‚£ä¹ˆrunå°±åœ¨å“ªä¸ªçº¿ç¨‹æ‰§è¡Œï¼ˆå½“å‰çº¿ç¨‹ï¼‰ï¼Œé€šå¸¸æ˜¯ä¸»çº¿ç¨‹ã€‚</p>
<p>ï¼ˆ2ï¼‰ä½¿ç”¨GCDå‡½æ•°<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">dispatch_after(<span class="name">dispatch_time</span>(<span class="name">DISPATCH_TIME_NOW</span>, (<span class="name">int64_t</span>)(<span class="number">2.0</span>Â *Â NSEC_PER_SEC)),Â dispatch_get_main_queue(), ^&#123;</div><div class="line">Â  Â Â // 2ç§’åå¼‚æ­¥æ‰§è¡Œè¿™é‡Œçš„ä»£ç ...</div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<ul>
<li><strong>ä¸€æ¬¡æ€§ä»£ç </strong></li>
</ul>
<p>ä½¿ç”¨<code>dispatch_once</code>å‡½æ•°èƒ½ä¿è¯æŸæ®µä»£ç åœ¨ç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­åªè¢«æ‰§è¡Œ1æ¬¡ã€‚<br><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">static</span>Â <span class="built_in">dispatch_once_t</span>Â onceToken;</div><div class="line"><span class="built_in">dispatch_once</span>(&amp;onceToken, ^&#123;</div><div class="line">Â  Â Â <span class="comment">//Â åªæ‰§è¡Œ1æ¬¡çš„ä»£ç (è¿™é‡Œé¢é»˜è®¤æ˜¯çº¿ç¨‹å®‰å…¨çš„)</span></div><div class="line">&#125;);</div></pre></td></tr></table></figure></p>
<p>æ•´ä¸ªç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­ï¼Œåªä¼šæ‰§è¡Œä¸€æ¬¡ã€‚</p>
<ul>
<li><strong>é˜Ÿåˆ—ç»„</strong></li>
</ul>
<p>æœ‰è¿™ä¹ˆ1ç§éœ€æ±‚ï¼šNSOperationQueue</p>
<p>é¦–å…ˆï¼šåˆ†åˆ«å¼‚æ­¥æ‰§è¡Œ2ä¸ªè€—æ—¶çš„æ“ä½œ<br>å…¶æ¬¡ï¼šç­‰2ä¸ªå¼‚æ­¥æ“ä½œéƒ½æ‰§è¡Œå®Œæ¯•åï¼Œå†å›åˆ°ä¸»çº¿ç¨‹æ‰§è¡Œæ“ä½œ</p>
<p>å¦‚æœæƒ³è¦å¿«é€Ÿé«˜æ•ˆåœ°å®ç°ä¸Šè¿°éœ€æ±‚ï¼Œå¯ä»¥è€ƒè™‘ç”¨é˜Ÿåˆ—ç»„ï¼š<br><figure class="highlight lisp"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">dispatch_group_tÂ group =Â Â dispatch_group_create()<span class="comment">;</span></div><div class="line">dispatch_group_async(<span class="name">group</span>,Â dispatch_get_global_queue(<span class="name">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>,Â <span class="number">0</span>), ^&#123;</div><div class="line">Â  Â Â //Â æ‰§è¡Œ<span class="number">1</span>ä¸ªè€—æ—¶çš„å¼‚æ­¥æ“ä½œ</div><div class="line">&#125;)<span class="comment">;</span></div><div class="line">dispatch_group_async(<span class="name">group</span>,Â dispatch_get_global_queue(<span class="name">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>,Â <span class="number">0</span>), ^&#123;</div><div class="line">Â  Â Â //Â æ‰§è¡Œ<span class="number">1</span>ä¸ªè€—æ—¶çš„å¼‚æ­¥æ“ä½œ</div><div class="line">&#125;)<span class="comment">;</span></div><div class="line">dispatch_group_notify(<span class="name">group</span>,Â dispatch_get_main_queue(), ^&#123;</div><div class="line">Â  Â Â //Â ç­‰å‰é¢çš„å¼‚æ­¥æ“ä½œéƒ½æ‰§è¡Œå®Œæ¯•åï¼Œå›åˆ°ä¸»çº¿ç¨‹...</div><div class="line">&#125;)<span class="comment">;</span></div></pre></td></tr></table></figure></p>
<h3 id="NSOperation"><a href="#NSOperation" class="headerlink" title="NSOperation"></a>NSOperation</h3><h5 id="1-ç®€å•è¯´æ˜"><a href="#1-ç®€å•è¯´æ˜" class="headerlink" title="1.ç®€å•è¯´æ˜"></a>1.ç®€å•è¯´æ˜</h5><p>NSOperationçš„ä½œâ½¤ï¼šé…åˆä½¿ç”¨NSOperationå’ŒNSOperationQueueä¹Ÿèƒ½å®ç°å¤šçº¿ç¨‹ç¼–ç¨‹ã€‚<br>NSOperationå’ŒNSOperationQueueå®ç°å¤šçº¿ç¨‹çš„å…·ä½“æ­¥éª¤ï¼š<br>ï¼ˆ1ï¼‰å…ˆå°†éœ€è¦æ‰§è¡Œçš„æ“ä½œå°è£…åˆ°ä¸€ä¸ªNSOperationå¯¹è±¡ä¸­<br>ï¼ˆ2ï¼‰ç„¶åå°†NSOperationå¯¹è±¡æ·»åŠ åˆ°NSOperationQueueä¸­<br>ï¼ˆ3ï¼‰ç³»ç»Ÿä¼šâ¾ƒåŠ¨å°†NSOperationQueueä¸­çš„NSOperationå–å‡ºæ¥<br>ï¼ˆ4ï¼‰å°†å–å‡ºçš„NSOperationå°è£…çš„æ“ä½œæ”¾åˆ°â¼€æ¡æ–°çº¿ç¨‹ä¸­æ‰§â¾</p>
<h5 id="2-NSOperationçš„å­ç±»"><a href="#2-NSOperationçš„å­ç±»" class="headerlink" title="2.NSOperationçš„å­ç±»"></a>2.NSOperationçš„å­ç±»</h5><p>NSOperationæ˜¯ä¸ªæŠ½è±¡ç±»,å¹¶ä¸å…·å¤‡å°è£…æ“ä½œçš„èƒ½åŠ›,å¿…é¡»ä½¿â½¤å®ƒçš„å­ç±»ã€‚<br>ä½¿ç”¨NSOperationâ¼¦ç±»çš„æ–¹å¼æœ‰3ç§ï¼š<br>ï¼ˆ1ï¼‰NSInvocationOperation<br>ï¼ˆ2ï¼‰NSBlockOperation<br>ï¼ˆ3ï¼‰è‡ªå®šä¹‰å­ç±»ç»§æ‰¿NSOperation,å®ç°å†…éƒ¨ç›¸åº”çš„â½…æ³•</p>
<p><strong>æ³¨ï¼š</strong></p>
<ul>
<li>é»˜è®¤æƒ…å†µä¸‹ï¼Œå¦‚æœæ“ä½œæ²¡æœ‰æ”¾åˆ°é˜Ÿåˆ—ä¸­queueä¸­ï¼Œéƒ½æ˜¯åŒæ­¥æ‰§è¡Œã€‚åªæœ‰å°†NSOperationæ”¾åˆ°ä¸€ä¸ªNSOperationQueueä¸­,æ‰ä¼šå¼‚æ­¥æ‰§è¡Œæ“ä½œã€‚</li>
<li>åªè¦NSBlockOperationå°è£…çš„æ“ä½œæ•°å¤§äº1,å°±ä¼šå¼‚æ­¥æ‰§è¡Œæ“ä½œã€‚</li>
</ul>
<h5 id="3-NSOperationQueue"><a href="#3-NSOperationQueue" class="headerlink" title="3.NSOperationQueue"></a>3.NSOperationQueue</h5><p>NSOperationQueueçš„ä½œâ½¤ï¼šNSOperationå¯ä»¥è°ƒâ½¤startâ½…æ³•æ¥æ‰§â¾ä»»åŠ¡,ä½†é»˜è®¤æ˜¯åŒæ­¥æ‰§è¡Œçš„ã€‚å¦‚æœå°†NSOperationæ·»åŠ åˆ°NSOperationQueue(æ“ä½œé˜Ÿåˆ—)ä¸­,ç³»ç»Ÿä¼šè‡ªåŠ¨å¼‚æ­¥æ‰§è¡ŒNSOperationä¸­çš„æ“ä½œã€‚<br><strong>æ·»åŠ æ“ä½œåˆ°NSOperationQueueä¸­ï¼Œè‡ªåŠ¨æ‰§è¡Œæ“ä½œï¼Œè‡ªåŠ¨å¼€å¯çº¿ç¨‹ã€‚</strong></p>
<p>NSOperationQueue æœ‰ä¸¤ç§ä¸åŒç±»å‹çš„é˜Ÿåˆ—ï¼šä¸»é˜Ÿåˆ—å’Œè‡ªå®šä¹‰é˜Ÿåˆ—ã€‚ä¸»é˜Ÿåˆ—è¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¹‹ä¸Šï¼Œè€Œè‡ªå®šä¹‰é˜Ÿåˆ—åœ¨åå°æ‰§è¡Œã€‚åœ¨ä¸¤ç§ç±»å‹ä¸­ï¼Œè¿™äº›é˜Ÿåˆ—æ‰€å¤„ç†çš„ä»»åŠ¡éƒ½ä½¿ç”¨ NSOperation çš„å­ç±»æ¥è¡¨è¿°ã€‚</p>
<h5 id="4-NSOperationåŸºæœ¬æ“ä½œ"><a href="#4-NSOperationåŸºæœ¬æ“ä½œ" class="headerlink" title="4.NSOperationåŸºæœ¬æ“ä½œ"></a>4.NSOperationåŸºæœ¬æ“ä½œ</h5><ul>
<li>å¹¶å‘æ•°ï¼š<code>-maxConcurrentOperationCount</code>ï¼›</li>
<li>é˜Ÿåˆ—çš„å–æ¶ˆã€æš‚åœå’Œæ¢å¤ï¼š<code>-cancelAllOperations</code>ï¼Œ<code>-setSuspended:</code>ï¼›</li>
<li>æ“ä½œä¼˜å…ˆçº§ï¼š<code>-setQueuePriority:</code>ï¼›</li>
<li>æ“ä½œä¾èµ–ï¼š<ul>
<li><code>-addDependency:</code></li>
<li>å¯ä»¥åœ¨ä¸åŒqueueçš„NSOperationä¹‹é—´åˆ›å»ºä¾èµ–å…³ç³»</li>
<li>é¿å…å¾ªç¯ä¾èµ–</li>
</ul>
</li>
<li>ç›‘å¬æ“ä½œçš„æ‰§è¡Œå®Œæ¯•ï¼š<br>  <code>- (void)setCompletionBlock:(void (^)(void))block;</code></li>
</ul>
<figure class="highlight 1c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">	<span class="comment">//ç›‘å¬æ“ä½œçš„æ‰§è¡Œå®Œæ¯•</span></div><div class="line">operation.completionBlock=^&#123;</div><div class="line">	<span class="comment">//.....æ“ä½œå®Œæˆåç»§ç»­è¿›è¡Œçš„æ“ä½œ</span></div><div class="line">&#125;;</div></pre></td></tr></table></figure>
<hr>
<p><strong>Ref:</strong></p>
<ul>
<li>Difference between a method and a function:<br>  <a href="http://stackoverflow.com/questions/155609/difference-between-a-method-and-a-function" target="_blank" rel="external">http://stackoverflow.com/questions/155609/difference-between-a-method-and-a-function</a></li>
<li>æ–‡é¡¶é¡¶çš„å¤šçº¿ç¨‹ç³»åˆ—ï¼š<br>  <a href="http://www.cnblogs.com/wendingding/tag/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87/" target="_blank" rel="external">http://www.cnblogs.com/wendingding/tag/%E5%A4%9A%E7%BA%BF%E7%A8%8B%E7%AF%87/</a></li>
<li><a href="http://blog.cnbluebox.com/blog/2014/07/01/cocoashen-ru-xue-xi-nsoperationqueuehe-nsoperationyuan-li-he-shi-yong/" target="_blank" rel="external">http://blog.cnbluebox.com/blog/2014/07/01/cocoashen-ru-xue-xi-nsoperationqueuehe-nsoperationyuan-li-he-shi-yong/</a></li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/5/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/5/">5</a><span class="page-number current">6</span><a class="page-number" href="/page/7/">7</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/">11</a><a class="extend next" rel="next" href="/page/7/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Calios</p>
              <p class="site-description motion-element" itemprop="description">Stedfast as thou art.</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">97</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/caliosd" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-globe"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="https://www.instagram.com/calios_1124" target="_blank" title="Instagram">
                      
                        <i class="fa fa-fw fa-globe"></i>Instagram</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Calios</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Gemini</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
