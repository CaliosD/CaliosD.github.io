<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><title> Regex Notes · Calios' Eden</title><meta name="description" content="Regex Notes - Calios"><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="/css/apollo.css"><link rel="search" type="application/opensearchdescription+xml" href="http://www.calios.gq/atom.xml" title="Calios' Eden"></head><body><div class="wrap"><header><a href="/" class="logo-link"><img src="/img/favicon.png" alt="logo"></a><ul class="nav nav-list"><li class="nav-list-item"><a href="/" target="_self" class="nav-list-link">BLOG</a></li><li class="nav-list-item"><a href="/archives/" target="_self" class="nav-list-link">ARCHIVE</a></li><li class="nav-list-item"><a href="http://weibo.com/calios1124" target="_blank" class="nav-list-link">WEIBO</a></li><li class="nav-list-item"><a href="https://github.com/caliosd" target="_blank" class="nav-list-link">GITHUB</a></li><li class="nav-list-item"><a href="/about/" target="_self" class="nav-list-link">ABOUT</a></li></ul></header><main class="container"><div class="post"><article class="post-block"><h1 class="post-title">Regex Notes</h1><div class="post-info">2017年4月12日</div><div class="post-content"><h3 id="Some-definitions-before-we-start"><a href="#Some-definitions-before-we-start" class="headerlink" title="Some definitions before we start:"></a>Some definitions before we start:</h3><ul>
<li><strong>literal</strong>: A <strong>literal</strong> is any character we use in a search or matching expression, for example, to find <strong>ind</strong> in w <strong>ind</strong> ows the <strong>ind</strong> is a <strong>literal</strong> string - each character plays a part in the search, it is <strong>literally</strong> the string we want to find.</li>
</ul>
<a id="more"></a>
<ul>
<li><strong>metacharacter</strong>: A <strong>metacharacter</strong> is one or more special characters that have a unique meaning and are NOT used as <strong>literals</strong> in the search expression, for example, the character ^ (circumflex or caret) is a <strong>metacharacter</strong>.</li>
<li><strong>target string</strong>: This term describes the string that we will be searching, that is, the string in which we want to find our match or search pattern.</li>
<li><strong>search expression</strong>: Most commonly called the regular expression. This term describes the search expression that we will be using to search our target string, that is, the pattern we use to find what we want.</li>
<li><strong>escape sequence</strong>: An <strong>escape sequence</strong> is a way of indicating that we want to use one of our <strong>metacharacters</strong> as a <strong>literal</strong>. In a regular expression an <strong>escape sequence</strong> involves placing the <strong>metacharacter</strong> <code>\</code> (backslash) in front of the <strong>metacharacter</strong> that we want to use as a <strong>literal</strong>, for example, if we want to find <strong>(s)</strong> in the target string <strong>window(s)</strong> then we use the search expression <code>\(s\)</code> and if we want to find <code>\\file</code> in the target string <code>:\\file</code> then we would need to use the search expression <code>\\\\file</code> (each <code>\</code> we want to search for as a <strong>literal</strong> (there are 2) is preceded by an <strong>escape sequence )</strong>.</li>
</ul>
<h3 id="1-Brackets-Ranges-and-Negation"><a href="#1-Brackets-Ranges-and-Negation" class="headerlink" title="1.Brackets, Ranges and Negation"></a>1.Brackets, Ranges and Negation</h3><ul>
<li><code>[ ]</code> : Match anything inside the square brackets for <strong>ONE character position, once and only once</strong>.</li>
<li><code>-</code> : The - (dash) <strong>inside square brackets</strong> is the ‘range separator’ and allows us to define a range.<ul>
<li>Note: - inside brackets(as a literal) must come first or last.</li>
</ul>
</li>
<li><code>^</code> : The ^ (circumflex or caret) <strong>inside square brackets</strong> negates the expression.<ul>
<li>Note: There are no spaces between the range delimiter values.</li>
</ul>
</li>
</ul>
<h3 id="2-Positioning-or-Anchors"><a href="#2-Positioning-or-Anchors" class="headerlink" title="2.Positioning (or Anchors)"></a>2.Positioning (or Anchors)</h3><ul>
<li><code>^</code> : The ^ (circumflex or caret) <strong>when not used inside square brackets</strong> means look only at the beginning of the target string.</li>
<li><code>$</code> : The $ (dollar) means look only at the end of the target string.</li>
<li><code>.</code> : The . (period) means any character(s) in this position.</li>
</ul>
<p>3.Iteration ‘metacharacters’</p>
<p>The following is a set of <strong>iteration metacharacters</strong> that can control the <strong>number of times</strong> the <strong>preceding</strong> character is found in our searches.</p>
<ul>
<li><code>?</code> : The ? (question mark) matches when the preceding character occurs 0 or 1 times only.</li>
<li><code>*</code>: The * (asterisk or star) matches when the preceding character occurs 0 or more times.</li>
<li><code>+</code> : The + (plus) matches when the preceding character occurs 1 or more times.</li>
<li><code>{n}</code> : Matches when the preceding character, or character range, occurs n times exactly.</li>
<li><code>{n,m}</code> : Matches when the preceding character occurs at least n times but not more than m times.</li>
<li><code>{n, }</code> : Matches when the preceding character occurs at least n times.</li>
</ul>
<h3 id="4-More-‘metacharacters’"><a href="#4-More-‘metacharacters’" class="headerlink" title="4.More ‘metacharacters’"></a>4.More ‘metacharacters’</h3><ul>
<li><code>()</code> : The ( (open parenthesis) and ) (close parenthesis) may be used to group (or bind) parts of our search expression together. Officially this is called a subexpression and subexpressions may be nested to any depth.</li>
<li><code>|</code>: The | (vertical bar or pipe) is called alternation in techspeak and means find the left hand OR right values.</li>
</ul>
<h3 id="5-Common-Extensions-and-Abbreviations"><a href="#5-Common-Extensions-and-Abbreviations" class="headerlink" title="5.Common Extensions and Abbreviations"></a>5.Common Extensions and Abbreviations</h3><ul>
<li><code>\d</code> : Match any character in the range 0 - 9.</li>
<li><code>\D</code> : Match any character NOT in the range 0 - 9.</li>
<li><code>\s</code> : Match any whitespace characters (space, tab etc.).</li>
<li><code>\S</code> : Match any character NOT whitespace (space, tab).</li>
<li><code>\w</code> : Match any character in the range 0 - 9, A - Z, a - z and punctuation.</li>
<li><code>\W</code> : Match any character NOT the range 0 - 9, A - Z, a - z and punctuation.</li>
<li><code>\b</code> : Word boundary. Match any character(s) at the beginning <code>(\bxx)</code> and/or end <code>(xx\b)</code> of a word.</li>
<li><code>\B</code> : Not word boundary. Match any character(s) NOT at the beginning <code>(\bxx)</code> and/or end <code>(xx\b)</code> of a word.</li>
</ul>
<p><strong>PS</strong>: Punctuation symbols: <code>. , &quot; &#39; ? ! ; : # $ % &amp; ( ) * + - / &lt; &gt; = @ [ ] \ ^ _ { } | ~</code></p>
<h3 id="6-Some-pragmatic-gists-for-checking-URL-validation-in-Objective-C"><a href="#6-Some-pragmatic-gists-for-checking-URL-validation-in-Objective-C" class="headerlink" title="6.Some pragmatic gists for checking URL validation in Objective-C"></a>6.Some pragmatic gists for checking URL validation in Objective-C</h3><figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// IP address check.</span></div><div class="line">- (<span class="built_in">BOOL</span>)isIPAddress &#123;</div><div class="line">    <span class="built_in">NSString</span> *result = <span class="keyword">self</span>;</div><div class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> containsProtocol]) &#123;</div><div class="line">        result = [result componentsSeparatedByString:<span class="string">@"//"</span>].lastObject;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">NSRegularExpression</span> *regex = [[<span class="built_in">NSRegularExpression</span> alloc] initWithPattern:<span class="string">@"[a-zA-Z]"</span> options:<span class="number">0</span> error:<span class="literal">NULL</span>];</div><div class="line">    <span class="built_in">NSInteger</span> matches = [regex numberOfMatchesInString:result options:<span class="number">0</span> range:<span class="built_in">NSMakeRange</span>(<span class="number">0</span>, result.length)];</div><div class="line">    <span class="keyword">return</span> (matches &lt;= <span class="number">0</span>);</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// IP address validation check.</span></div><div class="line">- (<span class="built_in">BOOL</span>)isValidIPAddress &#123;</div><div class="line">    <span class="built_in">NSString</span> *result = <span class="keyword">self</span>;</div><div class="line">    <span class="keyword">if</span> ([<span class="keyword">self</span> containsProtocol]) &#123;</div><div class="line">        result = [result componentsSeparatedByString:<span class="string">@"//"</span>].lastObject;</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">NSString</span> *ipRegEx = <span class="string">@"(\\d&#123;1,3&#125;\\.)&#123;3&#125;(\\d)&#123;1,3&#125;(:\\d&#123;1,&#125;)?"</span>;</div><div class="line">    <span class="built_in">NSPredicate</span> *ipTest = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"SELF MATCHES %@"</span>, ipRegEx];</div><div class="line">    <span class="keyword">return</span> [ipTest evaluateWithObject:result];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<figure class="highlight objectivec"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// DNS address validation check.</span></div><div class="line">- (<span class="built_in">BOOL</span>)isValidDNSAddress &#123;</div><div class="line">    <span class="built_in">NSString</span> *result = <span class="keyword">self</span>;</div><div class="line">    <span class="keyword">if</span> (![<span class="keyword">self</span> containsProtocol]) &#123;</div><div class="line">        result = [<span class="built_in">NSString</span> stringWithFormat:<span class="string">@"http://%@"</span>,<span class="keyword">self</span>];</div><div class="line">    &#125;</div><div class="line">    <span class="built_in">NSString</span> *urlRegEx =</div><div class="line">    <span class="string">@"(http|https)://((\\w)*|([0-9]*)|([-|_])*)+([\\.|/]((\\w)*|([0-9]*)|([-|_])*))+(:[0-9]&#123;1,&#125;)?"</span>;</div><div class="line">    <span class="built_in">NSPredicate</span> *urlTest = [<span class="built_in">NSPredicate</span> predicateWithFormat:<span class="string">@"SELF MATCHES %@"</span>, urlRegEx];</div><div class="line">    <span class="keyword">return</span> [urlTest evaluateWithObject:result];</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>For more details and test case, please check <a href="https://gist.github.com/CaliosD/9e4262d0151764f3a07b32dc2ce90eff" target="_blank" rel="external">here</a>.</p>
<h3 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h3><ul>
<li><a href="http://www.zytrax.com/tech/web/regex.htm" target="_blank" rel="external">http://www.zytrax.com/tech/web/regex.htm</a></li>
</ul>
</div></article></div></main><footer><div class="paginator"><a href="/2017/04/12/CAS登录之iOS端总结/" class="next">NEXT</a></div><div class="copyright"><p>© 2015 - 2017 <a href="http://www.calios.gq">Calios</a>, powered by <a href="https://hexo.io/" target="_blank">Hexo</a> and <a href="https://github.com/pinggod/hexo-theme-apollo" target="_blank">hexo-theme-apollo</a>.</p></div></footer></div><script async src="//cdn.bootcss.com/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_CHTML" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script><script>(function(b,o,i,l,e,r){b.GoogleAnalyticsObject=l;b[l]||(b[l]=function(){(b[l].q=b[l].q||[]).push(arguments)});b[l].l=+new Date;e=o.createElement(i);r=o.getElementsByTagName(i)[0];e.src='//www.google-analytics.com/analytics.js';r.parentNode.insertBefore(e,r)}(window,document,'script','ga'));ga('create',"UA-65933410-1",'auto');ga('send','pageview');</script></body></html>