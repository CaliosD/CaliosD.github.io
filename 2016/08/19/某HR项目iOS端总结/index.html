<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description" content="Stedfast as thou art."><title>某HR项目iOS端总结 | Calios' Eden</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">某HR项目iOS端总结</h1><a id="logo" href="/.">Calios' Eden</a><p class="description">Stedfast as thou art.</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">某HR项目iOS端总结</h1><div class="post-meta">Aug 19, 2016<script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><h3 id="1-产品设计"><a href="#1-产品设计" class="headerlink" title="1.产品设计"></a>1.产品设计</h3><ul>
<li>及时更新RP图。</li>
<li>对于iOS和Android差异化不大的页面，可以使用一套RP图。</li>
<li>保证对页面逻辑的详细说明。</li>
<li>对于特殊状态（如筛选、搜索等）的说明／图解要清晰。</li>
</ul>
<h3 id="2-接口文档部分"><a href="#2-接口文档部分" class="headerlink" title="2.接口文档部分"></a>2.接口文档部分</h3><h5 id="2-1-文档编写的注意事项："><a href="#2-1-文档编写的注意事项：" class="headerlink" title="2.1 文档编写的注意事项："></a>2.1 文档编写的注意事项：</h5><ul>
<li>对于所有接口都通用的参数或JSON数据格式，可以添加公共设置的部分，集中说明。 </li>
<li>请求数据的参数，要说明哪些是必须的，哪些是可选的，可选的默认值是什么。 </li>
<li>说清请求数据的方式是GET还是POST。 </li>
<li>命名要清晰，对于<strong>名词</strong>命名的参数，区分清楚<code>xxId</code>和<code>xxTitle</code>，而不是<code>xx</code>。 </li>
<li>标记类型、状态类型的文字，与其移动端和服务器各自手动维护一组枚举值，不如传输<strong>文字本身</strong>。 </li>
<li>请求参数和返回参数中，特殊类型的数据要说明。如日期的格式是<code>yyyy-MM-dd</code>、<code>yyyy/MM/dd</code>还是<code>yyyy.MM</code>。 </li>
<li>无需将userId/username传给服务器时，坚决不传，避免服务器端对于userId/username的误用。</li>
<li>可以将“凡是以<code>xxId</code>命名的字段一定为表的主键”这样的规则写在文档开始的公共说明中。</li>
<li>明确可选参数对应值为空时，是传“key:”” ”还是直接不传参数的key。</li>
<li>文档中要有详实的例子，还要注意按照接口调用的时序组织文档。</li>
</ul>
<h5 id="2-2-工作流程："><a href="#2-2-工作流程：" class="headerlink" title="2.2 工作流程："></a>2.2 工作流程：</h5><ul>
<li>现在的流程：<br>  pc端数据库设计与开发 》移动端产品设计 》<strong>移动端开发 》移动端接口设计</strong> 》pc端接口开发 </li>
</ul>
<ul>
<li><p>可优化为：<br>  pc端数据库设计与开发 》移动端产品设计 》<strong>移动端接口设计 》移动端开发</strong> 》pc端接口开发 </p>
</li>
<li><p>优化后的好处：</p>
<ul>
<li>避免移动端Model构建时，逐个比对字段名称的问题。</li>
<li>减少pc端依照“移动端写的接口文档”各种修改字段名的问题。</li>
<li>面向接口进行代码设计，可以在项目初期就对各功能模块有整体认识。</li>
</ul>
</li>
</ul>
<h5 id="2-3-编写工具："><a href="#2-3-编写工具：" class="headerlink" title="2.3 编写工具："></a>2.3 编写工具：</h5><ul>
<li><p>现在的工具：<br>  word + SVN(?)</p>
</li>
<li><p>存在的问题：</p>
<ul>
<li>各种和文档相关的样式、乱码、排版的问题。</li>
<li>无法即时调试，需自行粘贴到postman去测试。</li>
</ul>
</li>
<li><p>可优化为：<br>  － swagger：<a href="http://editor.swagger.io/#/" target="_blank" rel="external">http://editor.swagger.io/#/</a><br>  － RAP（from Alibaba）： </p>
<ul>
<li>Github：<a href="https://github.com/thx/RAP" target="_blank" rel="external">https://github.com/thx/RAP </a><ul>
<li>说明：<a href="http://div.io/topic/642" target="_blank" rel="external">http://div.io/topic/642</a> </li>
<li>例子：<a href="http://rap.taobao.org/workspace/myWorkspace.do?projectId=5359#37446" target="_blank" rel="external">http://rap.taobao.org/workspace/myWorkspace.do?projectId=5359#37446</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="2-4-接口设计要考虑的问题（供参考）："><a href="#2-4-接口设计要考虑的问题（供参考）：" class="headerlink" title="2.4 接口设计要考虑的问题（供参考）："></a>2.4 接口设计要考虑的问题（供参考）：</h5><ul>
<li><a href="http://ismartstudio.com/mobile-app-server-side-api-should-be-designed-to-take-into-account-problems.html" target="_blank" rel="external">http://ismartstudio.com/mobile-app-server-side-api-should-be-designed-to-take-into-account-problems.html </a></li>
<li><a href="https://segmentfault.com/q/1010000002523945" title="https://segmentfault.com/q/1010000002523945" target="_blank" rel="external">https://segmentfault.com/q/1010000002523945</a> </li>
</ul>
<h3 id="3-移动端开发"><a href="#3-移动端开发" class="headerlink" title="3.移动端开发"></a>3.移动端开发</h3><h5 id="3-1-BugList分析"><a href="#3-1-BugList分析" class="headerlink" title="3.1 BugList分析"></a>3.1 BugList分析</h5><p>BugList（iOS端）汇总图表及明细<br>（见<code>XX HR iOS端BugList汇总及明细.xlsx</code>）</p>
<p>Bug数量最多的类型前三类（单位：个）：</p>
<ul>
<li>逻辑缺失（23）</li>
<li>和pc端对接问题（19）</li>
<li>未与RP图对照（14）</li>
</ul>
<p>逐个分析一下：</p>
<h5 id="3-1-1-逻辑缺失"><a href="#3-1-1-逻辑缺失" class="headerlink" title="3.1.1 逻辑缺失"></a>3.1.1 逻辑缺失</h5><p>共计23个逻辑缺失的Bug中，比较突出的问题有：</p>
<ul>
<li>数据更新后没有自动刷新的问题（6个）  </li>
<li>页面或数据状态的保存或传递问题（5个）；</li>
<li>网络请求时，可选参数key为空的处理（2个）。</li>
</ul>
<p><strong>解决建议</strong></p>
<ul>
<li>对于数据有可能更新的列表，要添加自动刷新功能；</li>
<li>请求数据时，可以不传的参数key需要单独处理。</li>
</ul>
<h5 id="3-1-2-和pc端对接问题"><a href="#3-1-2-和pc端对接问题" class="headerlink" title="3.1.2 和pc端对接问题"></a>3.1.2 和pc端对接问题</h5><p>和pc端对接的相关Bug中，问题主要集中在：</p>
<ul>
<li>移动端使用字段错误，导致展示错误信息（6个）；</li>
<li>不同接口的<code>BaseURL</code>不相同（后期已统一）（3个）；</li>
<li>移动端使用的校验方式与pc端不一致（3个）；</li>
<li>空值的传输和处理（3个）：当某字段的值为空时，需传给服务器key和空值。</li>
</ul>
<p><strong>解决建议</strong></p>
<ul>
<li>增强对接口文档的统一理解；</li>
<li>pc端和移动端可以在各自的接口开发时约定好：<ul>
<li>所有接口的<code>BaseURL</code>；</li>
<li>除了<code>status=1</code>和<code>status=-1</code>的状态外，其他可能存在<code>status=0</code>的接口。</li>
</ul>
</li>
</ul>
<h5 id="3-1-3-未与RP图对照"><a href="#3-1-3-未与RP图对照" class="headerlink" title="3.1.3 未与RP图对照"></a>3.1.3 未与RP图对照</h5><p>主要由于在RP图不断更新的过程中，未能及时变更相应流程、操作和用户友好性的细节。这一部分的bug，是应该在自测中消除掉的。</p>
<h5 id="3-2-代码分析"><a href="#3-2-代码分析" class="headerlink" title="3.2 代码分析"></a>3.2 代码分析</h5><h5 id="3-2-1-代码行数统计"><a href="#3-2-1-代码行数统计" class="headerlink" title="3.2.1 代码行数统计"></a>3.2.1 代码行数统计</h5><table>
<thead>
<tr>
<th>文件夹</th>
<th>代码行数</th>
</tr>
</thead>
<tbody>
<tr>
<td>Classes</td>
<td>21357</td>
</tr>
<tr>
<td>Utility</td>
<td>2941</td>
</tr>
<tr>
<td>Constant</td>
<td>1498</td>
</tr>
<tr>
<td>AppDelegate</td>
<td>201</td>
</tr>
<tr>
<td>Categories</td>
<td>1758</td>
</tr>
<tr>
<td><strong>Sum</strong></td>
<td><strong>27755</strong></td>
</tr>
</tbody>
</table>
<h5 id="3-2-2-公共类的封装"><a href="#3-2-2-公共类的封装" class="headerlink" title="3.2.2 公共类的封装"></a>3.2.2 公共类的封装</h5><ul>
<li><code>BaseFundamentalViewController</code>中封装了空数据的处理、网络请求等通用功能，项目中几乎所有controller都继承自该类。</li>
<li><code>BaseViewController</code>继承自<code>BaseFundamentalViewController</code>。主要封装了与TableView相关的功能，如上拉加载、添加／清除筛选条件等。没有特殊需求的普通列表的展示，只需要不到50行代码。</li>
<li><code>BaseWebViewController</code>继承自<code>BaseFundamentalViewController</code>。主要用于全屏的webview模板展示。</li>
</ul>
<h5 id="3-2-3-代码复用"><a href="#3-2-3-代码复用" class="headerlink" title="3.2.3 代码复用"></a>3.2.3 代码复用</h5><ul>
<li>以后可能用到的功能模块：<ul>
<li><code>Base</code>系列；</li>
<li>下载管理（<em>待完善</em>）；</li>
<li>WebView模板展示（GRMustache）；</li>
<li>表格展示（GridView）；</li>
<li>Charts展示（Charts）；</li>
<li>图片浏览及选择（支持多选，MWPhotoBrowser）；</li>
<li>表单的展示及填写（XLForm）；</li>
<li>年月选择器。</li>
</ul>
</li>
</ul>
<h3 id="4-美工-amp-测试"><a href="#4-美工-amp-测试" class="headerlink" title="4.美工 &amp; 测试"></a>4.美工 &amp; 测试</h3><ul>
<li>对于移动端的切图可以逐渐模板化，如某些固定尺寸、固定的需求（如：Android的图片设计时有效内容尽量居中，便于自行剪裁）等。</li>
<li>时间允许的条件下，同类型bug可以设置关联bug，方便开发人员统一修复。</li>
</ul>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://www.caliosd.gq/2016/08/19/某HR项目iOS端总结/" data-id="cj5on8mo4005o7ns6zt92uh2u" class="article-share-link">分享</a><div class="tags"><a href="/tags/iOS/">iOS</a><a href="/tags/PragmaticProgrammer/">PragmaticProgrammer</a><a href="/tags/脑洞开一开/">脑洞开一开</a></div><div class="post-nav"><a href="/2016/09/03/【译】Workspace-Project-Target-Scheme-的区别/" class="pre">【译】Workspace &amp; Project &amp; Target &amp; Scheme 的区别</a><a href="/2016/07/24/实用svn命令/" class="next">实用svn命令</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://www.caliosd.gq"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/TesseractOCR/" style="font-size: 15px;">TesseractOCR</a> <a href="/tags/AVPlayer/" style="font-size: 15px;">AVPlayer</a> <a href="/tags/Background/" style="font-size: 15px;">Background</a> <a href="/tags/Bash/" style="font-size: 15px;">Bash</a> <a href="/tags/Mac/" style="font-size: 15px;">Mac</a> <a href="/tags/AutoLayout/" style="font-size: 15px;">AutoLayout</a> <a href="/tags/PragmaticProgrammer/" style="font-size: 15px;">PragmaticProgrammer</a> <a href="/tags/Block/" style="font-size: 15px;">Block</a> <a href="/tags/CAS/" style="font-size: 15px;">CAS</a> <a href="/tags/iOS8/" style="font-size: 15px;">iOS8</a> <a href="/tags/CoreAnimation/" style="font-size: 15px;">CoreAnimation</a> <a href="/tags/C语言/" style="font-size: 15px;">C语言</a> <a href="/tags/UIKit/" style="font-size: 15px;">UIKit</a> <a href="/tags/Runtime/" style="font-size: 15px;">Runtime</a> <a href="/tags/EnjoyMyCoffee/" style="font-size: 15px;">EnjoyMyCoffee</a> <a href="/tags/GPS/" style="font-size: 15px;">GPS</a> <a href="/tags/Foundation/" style="font-size: 15px;">Foundation</a> <a href="/tags/property/" style="font-size: 15px;">property</a> <a href="/tags/KVC/" style="font-size: 15px;">KVC</a> <a href="/tags/KVO/" style="font-size: 15px;">KVO</a> <a href="/tags/LLDB/" style="font-size: 15px;">LLDB</a> <a href="/tags/Objective-C/" style="font-size: 15px;">Objective-C</a> <a href="/tags/MongoDB/" style="font-size: 15px;">MongoDB</a> <a href="/tags/Regex/" style="font-size: 15px;">Regex</a> <a href="/tags/Xcode/" style="font-size: 15px;">Xcode</a> <a href="/tags/SolutionSummary/" style="font-size: 15px;">SolutionSummary</a> <a href="/tags/TextKit/" style="font-size: 15px;">TextKit</a> <a href="/tags/iOS/" style="font-size: 15px;">iOS</a> <a href="/tags/UICollectionView/" style="font-size: 15px;">UICollectionView</a> <a href="/tags/Swift/" style="font-size: 15px;">Swift</a> <a href="/tags/Chrome/" style="font-size: 15px;">Chrome</a> <a href="/tags/WebSocket/" style="font-size: 15px;">WebSocket</a> <a href="/tags/SourceRead/" style="font-size: 15px;">SourceRead</a> <a href="/tags/Blog/" style="font-size: 15px;">Blog</a> <a href="/tags/Markdown/" style="font-size: 15px;">Markdown</a> <a href="/tags/Clang/" style="font-size: 15px;">Clang</a> <a href="/tags/RichText/" style="font-size: 15px;">RichText</a> <a href="/tags/Terminal/" style="font-size: 15px;">Terminal</a> <a href="/tags/ARC/" style="font-size: 15px;">ARC</a> <a href="/tags/内存管理/" style="font-size: 15px;">内存管理</a> <a href="/tags/多线程/" style="font-size: 15px;">多线程</a> <a href="/tags/脑洞开一开/" style="font-size: 15px;">脑洞开一开</a> <a href="/tags/译言/" style="font-size: 15px;">译言</a> <a href="/tags/NotToCrashSeries/" style="font-size: 15px;">NotToCrashSeries</a> <a href="/tags/Download/" style="font-size: 15px;">Download</a> <a href="/tags/NSURLSession/" style="font-size: 15px;">NSURLSession</a> <a href="/tags/iOS9/" style="font-size: 15px;">iOS9</a> <a href="/tags/随笔/" style="font-size: 15px;">随笔</a> <a href="/tags/copy/" style="font-size: 15px;">copy</a> <a href="/tags/Vim/" style="font-size: 15px;">Vim</a> <a href="/tags/Git/" style="font-size: 15px;">Git</a> <a href="/tags/SVN/" style="font-size: 15px;">SVN</a> <a href="/tags/Storyboard/" style="font-size: 15px;">Storyboard</a> <a href="/tags/JumpNStruggleOut/" style="font-size: 15px;">JumpNStruggleOut</a> <a href="/tags/Summary/" style="font-size: 15px;">Summary</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/06/29/iOS的内存管理之ARC部分总结/">iOS的内存管理之ARC部分总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/06/28/关于copy的常见问题/">关于copy的常见问题</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/30/Issue-of-lazy-loading-property/">Issue of lazy loading property</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/05/12/KVO-KVC-missing-points/">KVO & KVC 知识点小结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/23/随笔一则-0422/">随笔一则-0422-美团沙龙面基</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/19/WebSocket初探/">WebSocket初探</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/15/Regex-Notes/">Regex Notes</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/04/12/CAS登录之iOS端总结/">CAS登录之iOS端总结</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/22/GPS-and-related/">GPS and related</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/03/16/Objective-C-Runtime-Programming-Guide-翻译及详解/">Objective-C Runtime Programming Guide 翻译及详解</a></li></ul></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">Calios' Eden.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>